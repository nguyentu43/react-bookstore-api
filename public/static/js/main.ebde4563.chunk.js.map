{"version":3,"sources":["graphqlClient.js","imgs/books.png","components/Store/Wrapper/CarouselWrapper.js","components/Store/BannerCarousel.js","components/Store/BlockLayout.js","components/Store/Form/AddProductForm.js","components/Store/Product.js","components/Store/Block/BestSellingBlock.js","components/Store/Author.js","components/Store/Block/FavouriteAuthorBlock.js","components/Store/Block/FeaturedBookBlock.js","components/Store/Block/FeaturedCategoryBlock.js","components/Store/Block/NewReleaseBlock.js","components/Store/DealProduct.js","components/Store/Block/WeekDealBlock.js","pages/Store/Index.js","components/Store/Footer/BottomFooter.js","components/Store/LeftMenu.js","components/Store/Drawer/LeftDrawer.js","components/Store/Nav/BottomNav.js","components/Store/Footer/TopFooter.js","components/Store/Form/LoginForm.js","components/Store/Drawer/RightDrawer.js","components/ColorModeSwitcher.js","components/Store/Nav/TopNav.js","pages/Store/Layout.js","components/Store/Nav/Breadcrumb.js","components/Store/Block/FeaturedShortedProductBlock.js","components/Store/Block/SupportInfoBlock.js","pages/Store/Single.js","components/Store/Block/FilterBlock.js","pages/Store/Search.js","components/Store/Block/ShortedOrderBlock.js","components/Store/Form/CheckoutForm.js","pages/Store/Checkout.js","pages/Store/Cart.js","hocs/withPrevent.js","pages/Store/Login.js","components/Store/Form/RegisterForm.js","pages/Store/Register.js","components/Store/Form/RequestPasswordForm.js","components/Store/Form/ResetPasswordForm.js","pages/Store/ForgotPassword.js","pages/Store/List.js","components/LoadingData.js","pages/Store/Wishlist.js","pages/Store/Order.js","pages/Store/Route.js","App.js","reportWebVitals.js","serviceWorker.js","index.js","context.js","components/Store/ShortedProduct.js","hocs/withAuth.js","components/Table.js","api.js"],"names":["graphQLClient","GraphQLClient","process","token","localStorage","getItem","request","query","variables","gql","setHeader","SlickArrowLeft","currentSlide","props","slideCount","w","h","as","FaChevronLeft","className","_hover","color","aria-hidden","aria-disabled","SlickArrowRight","FaChevronRight","CarouselWrapper","children","rest","settings","dots","infinite","speed","arrows","slidesToShow","slidesToScroll","prevArrow","nextArrow","responsive","breakpoint","lazyLoad","Item","bg","useColorModeValue","py","px","direction","justify","align","spacing","delay","size","fontWeight","Link","to","colorScheme","src","Book","BannerCarousel","mb","BlockLayout","blockName","rightButtonName","d","alignItems","ml","AddProductForm","id","useAppContext","state","items","cart","isLogin","auth","dispatch","useForm","handleSubmit","register","toast","useToast","data","a","status","title","exists","find","item","input","quantity","Number","addItemToCart","type","payload","addWishlist","result","onSubmit","handleAddProduct","defaultValue","min","max","name","ref","icon","FaCartPlus","onClick","FaHeart","Product","inSlider","price","discount","images","authors","slug","style","useMemo","borderRadius","borderWidth","p","m","borderRightWidth","borderBottomWidth","objectFit","secure_url","pt","fontSize","noOfLines","map","author","join","value","decimalScale","displayType","thousandSeparator","prefix","BestSellingBlock","useState","products","setProducts","useEffect","fetchProducts","search","limit","fetchData","key","Author","avatar","books","textAlign","FavouriteAuthorBlock","setAuthors","fetchAuthors","FeaturedBookBlock","featuredBooks","saleBooks","newestBooks","setData","isFitted","variant","borderTopWidth","borderLeftWidth","columns","FeaturedCategoryBlock","categories","setCategories","fetchCategories","reverse","filter","c","parent","slice","gap","FCIcons","cursor","NewReleaseBlock","category","colSpan","textColor","overflow","overflowY","pb","DealProduct","mx","WeekDealBlock","Index","BottomFooter","mt","FaInstagram","FaFacebook","FaYoutube","FaTwitter","FaPinterest","FaCcMastercard","FaPaypal","FaStripe","FaCcVisa","stack","prevItemStack","LeftMenu","setItems","prevItem","setPrevItem","push","useHistory","handleClick","length","pop","mr","LeftDrawer","forwardRef","isOpen","onClose","placement","finalFocusRef","BottomNav","useDisclosure","onOpen","btnRef","useRef","history","keyword","setKeyword","setBooks","loading","setLoading","trimmedKeyword","trim","debounce","useCallback","_","location","substr","split","params","FaAlignJustify","pos","pointerEvents","FaSearch","onChange","e","target","onKeyPress","placeholder","FaBackspace","right","left","zIndex","alignSelf","ShortedProduct","TopFooter","minWidth","LoginForm","inDrawer","errors","control","login","setItem","fetchUserInfo","user","response","message","handleLogin","isInvalid","email","htmlFor","Input","rules","required","password","RightDrawer","FaUserAlt","logout","ColorModeSwitcher","toggleColorMode","useColorMode","text","SwitchIcon","FaMoon","FaSun","aria-label","TopNav","FaQuestionCircle","FaPhoneAlt","FaSlidersH","FaShoppingBag","Layout","Breadcrumb","recursiveCategory","unshift","i","isCurrentPage","FeaturedShortedProductBlock","product","SupportInfoBlock","FaShippingFast","FaRegMoneyBillAlt","FaCheckCircle","FaFacebookMessenger","Single","useParams","setProduct","relatedProducts","fetchProduct","console","log","justifyContent","width","justifySelf","image","description","FcBookmark","FcContacts","FilterBlock","setCategory","setAuthor","range","setRange","order","setOrder","handleChangeLocation","handleChangeRange","v","sub","indexOf","defaultIndex","allowToggle","allowMultiple","flex","op","isChecked","Search","hasMore","setHasMore","init","offset","concat","InifiniteScroll","next","dataLength","loader","Array","from","height","ShortedOrderBlock","total","divider","CheckoutForm","cardError","setCardError","stripe","useStripe","elements","useElements","cardElement","getElement","CardElement","getPaymentCode","code","confirmCardPayment","payment_method","card","billing_details","error","paymentIntent","checkout","paymentID","createOrder","address","phone","pattern","borderColor","options","base","invalid","withAuth","QuantityInput","changeQuantity","setValue","FaCheck","setCart","productID","removeItemFromCart","Header","accessor","Cell","original","row","deleteProduct","FaTimes","Table","minW","action","withPrevent","Comp","RegisterForm","handleRegister","RequestPasswordForm","requestResetPassword","handleRequest","verifyTokenAndResetPassword","handleReset","setToken","List","index","LoadingData","removeWishlist","getWishlist","handleRemoveWishlist","FaRegTrashAlt","orders","setOrders","getToggleRowExpandedProps","FaRegSmile","moment","fromNow","fetchUserOrder","renderRowSubComponent","StoreRoute","path","component","exact","Wishlist","Order","Cart","Checkout","Login","Register","ForgotPassword","AdminRoute","React","lazy","breakpoints","createBreakpoints","sm","md","lg","xl","theme","extendTheme","stripePromise","loadStripe","App","removeItem","fallback","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Boolean","window","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","initialsState","reducer","reduce","prev","Error","AppContext","createContext","Provider","useReducer","contextValue","useContext","checkAdmin","isAdmin","skipPageReset","useTable","autoResetPage","useExpanded","usePagination","getTableProps","getTableBodyProps","visibleColumns","headerGroups","prepareRow","page","canPreviousPage","canNextPage","pageCount","pageOptions","gotoPage","nextPage","previousPage","setPageSize","pageIndex","pageSize","expanded","overflowX","headerGroup","hgI","TRow","getHeaderGroupProps","headers","column","hcI","THeading","getHeaderProps","rI","Fragment","getRowProps","cells","cell","cI","TData","getCellProps","isExpanded","my","disabled","FaAngleDoubleLeft","FaAngleLeft","FaAngleRight","FaAngleDoubleRight","addCategory","updateCategory","removeCategory","addAuthor","updateAuthor","removeAuthor","fetchUsers","addUser","updateUser","removeUser","addProduct","updateProduct","removeProduct","fetchOrders","addOrder","updateOrder","removeOrder","uploadImages","deleteImages","fetchImages"],"mappings":"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","file":"static/js/main.ebde4563.chunk.js","sourcesContent":["import { GraphQLClient, gql } from 'graphql-request';\r\n\r\nconst endpoint = process.env.REACT_APP_END_POINT;\r\nconst graphQLClient = new GraphQLClient(endpoint);\r\n\r\n\r\nconst token = localStorage.getItem('token');\r\nif(token){\r\n  graphQLClient.setHeader('authorization', 'Bearer ' + token);\r\n}\r\n\r\nexport default graphQLClient;\r\n\r\nexport function request(query, variables){\r\n  return graphQLClient.request(gql`${query}`, variables);\r\n}\r\n\r\nexport function rawRequest(query, variables){\r\n  return graphQLClient.rawRequest(gql`${query}`, variables);\r\n}","export default __webpack_public_path__ + \"static/media/books.7f599b8f.png\";","import Slider from 'react-slick';\r\nimport { Icon } from '@chakra-ui/react';\r\nimport { FaChevronLeft, FaChevronRight } from 'react-icons/fa';\r\n\r\nconst SlickArrowLeft = ({ currentSlide, slideCount, ...props }) => (\r\n  <Icon w={8} h={8} as={FaChevronLeft}\r\n    {...props}\r\n    className={\r\n      \"slick-prev slick-arrow\" +\r\n      (currentSlide === 0 ? \" slick-disabled\" : \"\")\r\n    }\r\n    _hover={{color: 'black'}}\r\n    aria-hidden=\"true\"\r\n    aria-disabled={currentSlide === 0 ? true : false}\r\n  />\r\n);\r\nconst SlickArrowRight = ({ currentSlide, slideCount, ...props }) => (\r\n  <Icon w={8} h={8} as={FaChevronRight}\r\n    {...props}\r\n    className={\r\n      \"slick-next slick-arrow\" +\r\n      (currentSlide === slideCount - 1 ? \" slick-disabled\" : \"\")\r\n    }\r\n    _hover={{color: 'black'}}\r\n    aria-hidden=\"true\"\r\n    aria-disabled={currentSlide === slideCount - 1 ? true : false}\r\n  />\r\n);\r\n\r\nexport default function CarouselWrapper({ children, ...rest }) {\r\n  const settings = {\r\n    dots: true,\r\n    infinite: false,\r\n    speed: 500,\r\n    arrows: false,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n    prevArrow: <SlickArrowLeft/>,\r\n    nextArrow: <SlickArrowRight />,\r\n    responsive: [\r\n      {\r\n        breakpoint: 992,\r\n        settings: {\r\n          slidesToShow: 2,\r\n          dots: true,\r\n          arrows: false,\r\n        },\r\n      },\r\n      {\r\n        breakpoint: 768,\r\n        settings: {\r\n          slidesToShow: 1,\r\n          dots: true,\r\n          arrows: false,\r\n        },\r\n      },\r\n    ],\r\n    ...rest,\r\n  };\r\n\r\n  return <Slider lazyLoad=\"ondemand\" {...settings}>{children}</Slider>;\r\n}\r\n","import { Button, Stack, VStack, Heading, Image, Box, useColorModeValue } from '@chakra-ui/react';\r\nimport Book from '../../imgs/books.png';\r\nimport CarouselWrapper from './Wrapper/CarouselWrapper';\r\nimport FadeIn from 'react-fade-in';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Item() {\r\n\r\n  const bg = useColorModeValue('pink.50', 'pink.500');\r\n\r\n  return (\r\n    <Stack\r\n      bg={bg}\r\n      py={[12, 24]}\r\n      px={[4, 6, 12]}\r\n      direction={['column', 'column', 'row']}\r\n      justify=\"space-between\"\r\n      align=\"center\"\r\n      spacing={4}\r\n    >\r\n      <VStack align=\"flex-start\" spacing={3}>\r\n        <FadeIn delay={500}>\r\n          <Heading size=\"sm\" color=\"gray.500\">\r\n            THE BOOKSTORE EDITORS'\r\n          </Heading>\r\n        </FadeIn>\r\n        <FadeIn delay={600}>\r\n          <Heading size=\"2xl\" fontWeight=\"none\">\r\n            Featured Books of the\r\n          </Heading>\r\n          <Heading size=\"2xl\">\r\n            February\r\n          </Heading>\r\n        </FadeIn>\r\n        <FadeIn delay={700}>\r\n          <Button as={Link} to=\"/store\" colorScheme=\"blue\">\r\n            See More\r\n          </Button>\r\n        </FadeIn>\r\n      </VStack>\r\n      <FadeIn delay={500}>\r\n        <Image w=\"auto\" h={['auto', 'auto', 180, 240]} src={Book} />\r\n      </FadeIn>\r\n    </Stack>\r\n  );\r\n}\r\n\r\nexport default function BannerCarousel() {\r\n  return (\r\n    <Box mb={4}>\r\n      <CarouselWrapper responsive={null}>\r\n        <Item />\r\n        <Item />\r\n      </CarouselWrapper>\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Text, Heading, Stack, Icon } from '@chakra-ui/react';\r\nimport { FaChevronRight } from 'react-icons/fa';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function BlockLayout({\r\n  blockName,\r\n  rightButtonName,\r\n  to = '/store',\r\n  children,\r\n}) {\r\n  return (\r\n    <Box px={[4, 6, 12]} py={[8]}>\r\n      {blockName && (\r\n        <Stack\r\n          direction={['column', 'column', 'row']}\r\n          justify=\"space-between\"\r\n          mb={[4, 8]}\r\n        >\r\n          <Heading>{blockName}</Heading>\r\n          {rightButtonName && (\r\n            <Text d=\"flex\" alignItems=\"center\" as={Link} to={to}>\r\n              {rightButtonName} <Icon ml={2} as={FaChevronRight} />\r\n            </Text>\r\n          )}\r\n        </Stack>\r\n      )}\r\n      {children}\r\n    </Box>\r\n  );\r\n}\r\n","import {\r\n  HStack,\r\n  Icon,\r\n  IconButton,\r\n  NumberDecrementStepper,\r\n  NumberIncrementStepper,\r\n  NumberInput,\r\n  NumberInputField,\r\n  NumberInputStepper,\r\n  useToast,\r\n} from '@chakra-ui/react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { FaCartPlus, FaHeart } from 'react-icons/fa';\r\nimport { addItemToCart, addWishlist } from '../../../api';\r\nimport { useAppContext } from '../../../context';\r\n\r\nexport default function AddProductForm({ id }) {\r\n  const {\r\n    state: {\r\n      cart: { items },\r\n      auth: { isLogin },\r\n    },\r\n    dispatch,\r\n  } = useAppContext();\r\n  const { handleSubmit, register } = useForm();\r\n  const toast = useToast();\r\n\r\n  async function handleAddProduct(data) {\r\n    if (!isLogin) {\r\n      toast({ status: 'info', title: 'Login to add book to cart' });\r\n      return;\r\n    }\r\n\r\n    const exists = items.find(item => item.id === id);\r\n    const input = {\r\n      quantity: 1,\r\n      id,\r\n    };\r\n    if (exists) {\r\n      input.quantity = Number(data.quantity) + exists.quantity;\r\n    }\r\n\r\n    try {\r\n      const { cart } = await addItemToCart({ input });\r\n      dispatch({ type: 'SET_CART', payload: cart });\r\n      toast({title: 'A book is added to cart'});\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async function handleAddWishlist() {\r\n    if (!isLogin) {\r\n      toast({ status: 'info', title: 'Login to add book to wishlist' });\r\n      return;\r\n    }\r\n    try {\r\n      const { result } = await addWishlist({ id });\r\n      toast({title: 'A book is added to wishlist'});\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(data => handleAddProduct(data))}>\r\n      <HStack>\r\n        <NumberInput defaultValue={1} min={1} w={100} max={20}>\r\n          <NumberInputField name=\"quantity\" ref={register} />\r\n          <NumberInputStepper>\r\n            <NumberIncrementStepper />\r\n            <NumberDecrementStepper />\r\n          </NumberInputStepper>\r\n        </NumberInput>\r\n        <IconButton\r\n          icon={<Icon as={FaCartPlus} />}\r\n          type=\"submit\"\r\n          colorScheme=\"blue\"\r\n        />\r\n        <IconButton\r\n          color=\"pink.500\"\r\n          onClick={handleAddWishlist}\r\n          icon={<Icon as={FaHeart} />}\r\n        />\r\n      </HStack>\r\n    </form>\r\n  );\r\n}\r\n","import { Image, Text, VStack, HStack } from '@chakra-ui/react';\r\nimport CurrencyFormat from 'react-currency-format';\r\nimport { useMemo } from 'react';\r\nimport AddProductForm from './Form/AddProductForm';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function Product({\r\n  inSlider = false,\r\n  id,\r\n  name,\r\n  price,\r\n  discount,\r\n  images,\r\n  authors,\r\n  slug,\r\n}) {\r\n\r\n  const style = useMemo(() => {\r\n    if (inSlider) {\r\n      return {\r\n        borderRadius: 'md',\r\n        borderWidth: 1,\r\n        p: 4,\r\n        m: 2,\r\n      };\r\n    } else {\r\n      return {\r\n        borderRightWidth: 1,\r\n        borderBottomWidth: 1,\r\n        p: 4,\r\n      };\r\n    }\r\n  }, [inSlider]);\r\n  return (\r\n    <VStack {...style}>\r\n      <Image objectFit=\"contain\" w={120} src={images[0].secure_url} />\r\n      <VStack align=\"stretch\" spacing={1} pt={2}>\r\n        <Text\r\n          to={'/store/book/' + slug}\r\n          as={Link}\r\n          fontWeight=\"bold\"\r\n          fontSize=\"xl\"\r\n          noOfLines={2}\r\n        >\r\n          {name}\r\n        </Text>\r\n        <Text color=\"gray.500\">\r\n          {authors.map(author => author.name).join(', ')}\r\n        </Text>\r\n        <HStack align=\"baseline\">\r\n          <Text fontSize=\"xl\" fontWeight=\"bold\">\r\n            <CurrencyFormat\r\n              value={price * (1 - discount)}\r\n              decimalScale={2}\r\n              displayType={'text'}\r\n              thousandSeparator={true}\r\n              prefix={'$'}\r\n            />{' '}\r\n          </Text>\r\n          {discount > 0 && (\r\n            <Text as=\"s\" fontSize=\"sm\">\r\n              <CurrencyFormat\r\n                value={price}\r\n                displayType={'text'}\r\n                thousandSeparator={true}\r\n                prefix={'$'}\r\n              />\r\n            </Text>\r\n          )}\r\n        </HStack>\r\n        <AddProductForm id={id} />\r\n      </VStack>\r\n    </VStack>\r\n  );\r\n}\r\n","import BlockLayout from '../BlockLayout';\r\nimport CarouselWrapper from '../Wrapper/CarouselWrapper';\r\nimport Product from '../Product';\r\nimport { useEffect, useState } from 'react';\r\nimport { fetchProducts } from '../../../api';\r\n\r\nexport default function BestSellingBlock() {\r\n  const [products, setProducts] = useState([]);\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const { products } = await fetchProducts({\r\n        search: 'order=0',\r\n        limit: 10,\r\n      });\r\n      setProducts(products);\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <BlockLayout\r\n      blockName=\"BestSelling Books\"\r\n      rightButtonName=\"View All\"\r\n      to=\"/store/search?order=0\"\r\n    >\r\n      <CarouselWrapper slidesToShow={5} dots={false} arrows={true}>\r\n        {products.map(item => (\r\n          <Product inSlider={true} {...item} key={item.id} />\r\n        ))}\r\n      </CarouselWrapper>\r\n    </BlockLayout>\r\n  );\r\n}\r\n","import { VStack, Avatar, Text, Box } from '@chakra-ui/react';\r\nimport {  Link } from 'react-router-dom';\r\n\r\nexport default function Author({ id, name, avatar, books }) {\r\n\r\n  return (\r\n    <VStack\r\n      as={Link}\r\n      to = {'/store/search?author=' + id}\r\n    >\r\n      <Avatar size=\"2xl\" src={avatar} />\r\n      <Box textAlign=\"center\">\r\n        <Text fontWeight=\"bold\">{name}</Text>\r\n        <Text>{books} Published Books</Text>\r\n      </Box>\r\n    </VStack>\r\n  );\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { fetchAuthors } from '../../../api';\r\nimport Author from '../Author';\r\nimport BlockLayout from '../BlockLayout';\r\nimport CarouselWrapper from '../Wrapper/CarouselWrapper';\r\n\r\nexport default function FavouriteAuthorBlock() {\r\n  const [authors, setAuthors] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const { authors } = await fetchAuthors();\r\n      setAuthors(authors);\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <BlockLayout blockName=\"Favourite Authors\">\r\n      <CarouselWrapper slidesToShow={5} arrows={true} dots={false}>\r\n        {authors.map(author => (\r\n          <Author key={author.id} {...author} />\r\n        ))}\r\n      </CarouselWrapper>\r\n    </BlockLayout>\r\n  );\r\n}\r\n","import {\r\n  SimpleGrid,\r\n  Tab,\r\n  TabList,\r\n  TabPanel,\r\n  TabPanels,\r\n  Tabs,\r\n} from '@chakra-ui/react';\r\nimport { useEffect, useState } from 'react';\r\nimport { fetchProducts } from '../../../api';\r\nimport BlockLayout from '../BlockLayout';\r\nimport Product from '../Product';\r\n\r\nexport default function FeaturedBookBlock() {\r\n\r\n  const [data, setData] = useState({featuredBooks: [], saleBooks: [], newestBooks: []});\r\n\r\n  useEffect(() => {\r\n    async function fetchData(){\r\n      const { products: saleBooks } = await fetchProducts({\r\n        search: 'order=4',\r\n        limit: 10,\r\n      });\r\n\r\n      const { products: newestBooks } = await fetchProducts({\r\n        search: 'order=1',\r\n        limit: 10,\r\n      });\r\n\r\n      const { products: featuredBooks } = await fetchProducts({\r\n        search: 'order=0',\r\n        limit: 10,\r\n      });\r\n\r\n      setData({saleBooks, newestBooks, featuredBooks});\r\n    }\r\n    fetchData();\r\n  },[])\r\n\r\n  return (\r\n    <BlockLayout blockName=\"Featured Books\">\r\n      <Tabs isFitted variant=\"enclosed\">\r\n        <TabList>\r\n          <Tab>Featured</Tab>\r\n          <Tab>On Sale</Tab>\r\n          <Tab>Newest</Tab>\r\n        </TabList>\r\n        <TabPanels>\r\n          <TabPanel px={0}>\r\n            <SimpleGrid\r\n              borderTopWidth={1}\r\n              borderLeftWidth={1}\r\n              columns={[1, 2, 3, 5]}\r\n            >\r\n              {data.featuredBooks.map(item => (\r\n                <Product key={item.id} {...item} />\r\n              ))}\r\n            </SimpleGrid>\r\n          </TabPanel>\r\n          <TabPanel px={0}>\r\n            <SimpleGrid\r\n              borderTopWidth={1}\r\n              borderLeftWidth={1}\r\n              columns={[1, 2, 3, 5]}\r\n            >\r\n              {data.saleBooks.map(item => (\r\n                <Product key={item.id} {...item} />\r\n              ))}\r\n            </SimpleGrid>\r\n          </TabPanel>\r\n          <TabPanel px={0}>\r\n            <SimpleGrid\r\n              borderTopWidth={1}\r\n              borderLeftWidth={1}\r\n              columns={[1, 2, 3, 5]}\r\n            >\r\n              {data.newestBooks.map(item => (\r\n                <Product key={item.id} {...item} />\r\n              ))}\r\n            </SimpleGrid>\r\n          </TabPanel>\r\n        </TabPanels>\r\n      </Tabs>\r\n    </BlockLayout>\r\n  );\r\n}\r\n","import BlockLayout from '../BlockLayout';\r\nimport * as FCIcons from 'react-icons/fc';\r\nimport {\r\n  VStack,\r\n  Icon,\r\n  Text,\r\n  SimpleGrid,\r\n  useColorModeValue,\r\n} from '@chakra-ui/react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useEffect, useState } from 'react';\r\nimport { fetchCategories } from '../../../api';\r\n\r\nexport default function FeaturedCategoryBlock() {\r\n  const bg = useColorModeValue('pink.50', 'pink.500');\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const data = await fetchCategories();\r\n      const categories = data.categories\r\n        .reverse()\r\n        .filter(c => c.parent === null)\r\n        .slice(0, 4);\r\n      setCategories(categories);\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <BlockLayout\r\n      blockName=\"Featured Categories\"\r\n      rightButtonName=\"All Categories\"\r\n      to=\"/store/search\"\r\n    >\r\n      <SimpleGrid columns={[1, 2, 3, 4]} gap={2}>\r\n        {categories.map(item => (\r\n          <VStack\r\n            align=\"flex-start\"\r\n            borderRadius=\"md\"\r\n            key={item.id}\r\n            bg={bg}\r\n            px={8}\r\n            py={6}\r\n          >\r\n            <Icon w={12} h={12} as={FCIcons[item.icon || 'FcReading']} />\r\n            <Text noOfLines={1} fontSize=\"2xl\">\r\n              {item.name}\r\n            </Text>\r\n            <Text\r\n              _hover={{ cursor: 'pointer' }}\r\n              to={'/store/search?category=' + item.id}\r\n              as={Link}\r\n              size=\"lg\"\r\n            >\r\n              Shop Now\r\n            </Text>\r\n          </VStack>\r\n        ))}\r\n      </SimpleGrid>\r\n    </BlockLayout>\r\n  );\r\n}\r\n","import {\r\n  SimpleGrid,\r\n  GridItem,\r\n  VStack,\r\n  Tab,\r\n  TabList,\r\n  TabPanel,\r\n  TabPanels,\r\n  Tabs,\r\n  Image,\r\n  Text,\r\n  Button,\r\n  useColorModeValue,\r\n} from '@chakra-ui/react';\r\nimport BlockLayout from '../BlockLayout';\r\nimport Product from '../Product';\r\nimport Book from '../../../imgs/books.png';\r\nimport { useEffect, useState } from 'react';\r\nimport { fetchCategories, fetchProducts } from '../../../api';\r\n\r\nexport default function NewReleaseBlock() {\r\n  const bg = useColorModeValue('pink.50', 'pink.500');\r\n\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const { categories } = await fetchCategories();\r\n\r\n      for (const category of categories) {\r\n        category.products = (\r\n          await fetchProducts({\r\n            search: 'order=4&category=' + category.id,\r\n            limit: 9,\r\n          })\r\n        ).products;\r\n      }\r\n\r\n      setCategories(categories);\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <BlockLayout blockName=\"New Releases\">\r\n      <SimpleGrid columns={[1, 1, 3]} gap={4}>\r\n        <GridItem colSpan={1} bg={bg} borderRadius=\"md\">\r\n          <VStack align=\"stretch\" p={8} justify=\"center\">\r\n            <Image objectFit=\"contain\" src={Book} />\r\n            <VStack align=\"flex-start\">\r\n              <Text fontSize=\"4xl\">Get Extra</Text>\r\n              <Text fontSize=\"5xl\" textColor=\"red.500\">\r\n                Sale -25%\r\n              </Text>\r\n              <Text fontSize=\"2xl\" fontWeight=\"bold\">\r\n                ON ORDER OVER <br />\r\n                $100\r\n              </Text>\r\n              <Button colorScheme=\"blue\">View More</Button>\r\n            </VStack>\r\n          </VStack>\r\n        </GridItem>\r\n        <GridItem colSpan={[1, 1, 2]} px={[0, 0, 4]} overflow=\"overlay\">\r\n          <Tabs isFitted variant=\"enclosed\">\r\n            <TabList overflowY=\"scroll\">\r\n              {categories.map(category => (\r\n                <Tab key={category.id}>{category.name}</Tab>\r\n              ))}\r\n            </TabList>\r\n            <TabPanels>\r\n              {categories.map(category => (\r\n                <TabPanel key={category.id} px={0} pb={0}>\r\n                  <SimpleGrid\r\n                    borderTopWidth={1}\r\n                    borderLeftWidth={1}\r\n                    columns={[1, 2, 2, 3]}\r\n                  >\r\n                    {category.products.map(item => (\r\n                      <Product key={item.id} {...item} />\r\n                    ))}\r\n                  </SimpleGrid>\r\n                </TabPanel>\r\n              ))}\r\n            </TabPanels>\r\n          </Tabs>\r\n        </GridItem>\r\n      </SimpleGrid>\r\n    </BlockLayout>\r\n  );\r\n}\r\n","import { Image, Text, VStack, HStack, Stack, useColorModeValue } from '@chakra-ui/react';\r\nimport CurrencyFormat from 'react-currency-format';\r\nimport { Link } from 'react-router-dom';\r\nimport AddProductForm from './Form/AddProductForm';\r\n\r\nexport default function DealProduct({\r\n  id,\r\n  name,\r\n  price,\r\n  discount,\r\n  images,\r\n  authors,\r\n  slug,\r\n}) {\r\n  const bg = useColorModeValue('white', 'blue.900');\r\n  return (\r\n    <Stack\r\n      direction={['column', 'column', 'row']}\r\n      borderWidth={1}\r\n      borderRadius=\"md\"\r\n      px={4}\r\n      py={4}\r\n      mx={2}\r\n      spacing={5}\r\n      bg={bg}\r\n    >\r\n      <Image h={60} objectFit=\"contain\" src={images[0].secure_url} />\r\n      <VStack align=\"stretch\" spacing={1}>\r\n        <Text as={Link} to={\"/store/book\" + slug} fontWeight=\"bold\" fontSize=\"xl\" noOfLines={2}>\r\n          {name}\r\n        </Text>\r\n        <Text>\r\n          {authors.map(author => author.name).join(', ')}\r\n        </Text>\r\n        <HStack align=\"baseline\">\r\n          <Text fontSize=\"xl\" fontWeight=\"bold\">\r\n            <CurrencyFormat\r\n              value={price * (1 - discount)}\r\n              decimalScale={2}\r\n              displayType={'text'}\r\n              thousandSeparator={true}\r\n              prefix={'$'}\r\n            />{' '}\r\n          </Text>\r\n          {discount > 0 && (\r\n            <Text as=\"s\" fontSize=\"sm\">\r\n              <CurrencyFormat\r\n                value={price}\r\n                displayType={'text'}\r\n                thousandSeparator={true}\r\n                prefix={'$'}\r\n              />\r\n            </Text>\r\n          )}\r\n        </HStack>\r\n        <AddProductForm id={id}/>\r\n      </VStack>\r\n    </Stack>\r\n  );\r\n}\r\n","import { Box, useColorModeValue } from '@chakra-ui/react';\r\nimport BlockLayout from '../BlockLayout';\r\nimport CarouselWrapper from '../Wrapper/CarouselWrapper';\r\nimport DealProduct from '../DealProduct';\r\nimport { useEffect, useState } from 'react';\r\nimport { fetchProducts } from '../../../api';\r\n\r\nexport default function WeekDealBlock() {\r\n  const bg = useColorModeValue('pink.50', 'pink.500');\r\n  const [products, setProducts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const { products } = await fetchProducts({\r\n        search: 'range=1-25',\r\n        limit: 10,\r\n      });\r\n      setProducts(products);\r\n    }\r\n    fetchData();\r\n  }, []);\r\n  return (\r\n    <Box bg={bg}>\r\n      <BlockLayout blockName=\"Deals of the Week\">\r\n        <CarouselWrapper slidesToShow={2} dots={false} arrows={true}>\r\n          {products.map(item => (\r\n            <DealProduct key={item.id} {...item} />\r\n          ))}\r\n        </CarouselWrapper>\r\n      </BlockLayout>\r\n    </Box>\r\n  );\r\n}\r\n","import BannerCarousel from '../../components/Store/BannerCarousel';\r\nimport BestSellingBlock from '../../components/Store/Block/BestSellingBlock';\r\nimport FavouriteAuthorBlock from '../../components/Store/Block/FavouriteAuthorBlock';\r\nimport FeaturedBookBlock from '../../components/Store/Block/FeaturedBookBlock';\r\nimport FeaturedCategoryBlock from '../../components/Store/Block/FeaturedCategoryBlock';\r\nimport NewReleaseBlock from '../../components/Store/Block/NewReleaseBlock';\r\nimport WeekDealBlock from '../../components/Store/Block/WeekDealBlock';\r\n\r\nexport default function Index() {\r\n  return (\r\n    <>\r\n      <BannerCarousel />\r\n      <FeaturedCategoryBlock />\r\n      <BestSellingBlock />\r\n      <FeaturedBookBlock />\r\n      <WeekDealBlock />\r\n      <NewReleaseBlock />\r\n      <FavouriteAuthorBlock />\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  GridItem,\r\n  Heading,\r\n  HStack,\r\n  Icon,\r\n  SimpleGrid,\r\n  Stack,\r\n  Text,\r\n  VStack,\r\n} from '@chakra-ui/react';\r\nimport {\r\n  FaCcMastercard,\r\n  FaCcVisa,\r\n  FaFacebook,\r\n  FaInstagram,\r\n  FaPaypal,\r\n  FaPinterest,\r\n  FaStripe,\r\n  FaTwitter,\r\n  FaYoutube,\r\n} from 'react-icons/fa';\r\n\r\nexport default function BottomFooter() {\r\n  return (\r\n    <>\r\n      <SimpleGrid\r\n        columns={[1,2,2,6]}\r\n        px={[4, 6, 12]}\r\n        py={16}\r\n        borderTopWidth={1}\r\n        gap={8}\r\n      >\r\n        <GridItem colSpan={[1, 2]}>\r\n          <Heading>Bookstore</Heading>\r\n          <Text mt={6}>\r\n            1418 River Drive, Suite 35 Cottonhall, CA 9622 United States\r\n          </Text>\r\n          <Text mt={6}>\r\n            sale@bookstore.example\r\n            <br />\r\n            +1 246-345-0695\r\n          </Text>\r\n          <HStack mt={8} spacing={8}>\r\n            <Icon as={FaInstagram} />\r\n            <Icon as={FaFacebook} />\r\n            <Icon as={FaYoutube} />\r\n            <Icon as={FaTwitter} />\r\n            <Icon as={FaPinterest} />\r\n          </HStack>\r\n        </GridItem>\r\n        <GridItem>\r\n          <Heading size=\"lg\">Explore</Heading>\r\n          <VStack mt={6} align=\"flex-start\">\r\n            <Text>About us</Text>\r\n            <Text>Site map</Text>\r\n            <Text>Bookmarks</Text>\r\n            <Text>Sign in/Join</Text>\r\n          </VStack>\r\n        </GridItem>\r\n        <GridItem>\r\n          <Heading size=\"lg\">Explore</Heading>\r\n          <VStack mt={6} align=\"flex-start\">\r\n            <Text>About us</Text>\r\n            <Text>Site map</Text>\r\n            <Text>Bookmarks</Text>\r\n            <Text>Sign in/Join</Text>\r\n          </VStack>\r\n        </GridItem>\r\n        <GridItem>\r\n          <Heading size=\"lg\">Explore</Heading>\r\n          <VStack mt={6} align=\"flex-start\">\r\n            <Text>About us</Text>\r\n            <Text>Site map</Text>\r\n            <Text>Bookmarks</Text>\r\n            <Text>Sign in/Join</Text>\r\n          </VStack>\r\n        </GridItem>\r\n        <GridItem>\r\n          <Heading size=\"lg\">Explore</Heading>\r\n          <VStack mt={6} align=\"flex-start\">\r\n            <Text>About us</Text>\r\n            <Text>Site map</Text>\r\n            <Text>Bookmarks</Text>\r\n            <Text>Sign in/Join</Text>\r\n          </VStack>\r\n        </GridItem>\r\n      </SimpleGrid>\r\n      <Stack\r\n        direction={['column', 'column', 'row']}\r\n        align=\"center\"\r\n        px={[4, 6, 12]}\r\n        py={8}\r\n        borderTopWidth={1}\r\n        justify=\"space-between\"\r\n      >\r\n        <Text>2020 Book Worm. All rights reserved</Text>\r\n        <HStack spacing={[8, 12]}>\r\n          <Icon w={10} h={10} as={FaCcMastercard} />\r\n          <Icon w={10} h={10} as={FaPaypal} />\r\n          <Icon w={10} h={10} as={FaStripe} />\r\n          <Icon w={10} h={10} as={FaCcVisa} />\r\n        </HStack>\r\n      </Stack>\r\n    </>\r\n  );\r\n}\r\n","import { VStack, Text, Icon, Flex, useDisclosure } from '@chakra-ui/react';\r\nimport { useState } from 'react';\r\nimport { FaChevronLeft, FaChevronRight } from 'react-icons/fa';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst stack = [];\r\nconst prevItemStack = [];\r\n\r\nexport default function LeftMenu({categories}) {\r\n\r\n  const [items, setItems] = useState([...categories]);\r\n  const [prevItem, setPrevItem] = useState(null);\r\n  const {push} = useHistory();\r\n\r\n  function handleClick(item) {\r\n\r\n    if(item.children && item.children.length > 0){\r\n      stack.push(items);\r\n      prevItemStack.push(item);\r\n      setItems(item.children);\r\n      setPrevItem(item);\r\n    }\r\n    else{\r\n      push('/store/search?category=' + item.id);\r\n    }\r\n  }\r\n\r\n  function handlePrevClick() {\r\n    setItems(stack.pop());\r\n\r\n    if(prevItemStack.length === 1){\r\n        prevItemStack.pop();\r\n        setPrevItem(null);\r\n        return;\r\n    }\r\n    prevItemStack.pop();\r\n    setPrevItem(prevItemStack[prevItemStack.length - 1]);\r\n  }\r\n\r\n  return (\r\n    <VStack align=\"stretch\" spacing={3}>\r\n      {prevItem && (\r\n        <Flex\r\n          onClick={handlePrevClick}\r\n          _hover={{ cursor: 'pointer' }}\r\n          align=\"center\"\r\n        >\r\n          <Icon mr={2} as={FaChevronLeft} />\r\n          <Text>{prevItem.name}</Text>\r\n        </Flex>\r\n      )}\r\n      {\r\n        items.map(item => {\r\n          return (\r\n            <Flex\r\n              onClick={() => handleClick(item)}\r\n              _hover={{ cursor: 'pointer' }}\r\n              key={item.id}\r\n              align=\"center\"\r\n              justify=\"space-between\"\r\n            >\r\n              <Text>{item.name}</Text>\r\n              {item.children && item.children.length >0 && <Icon as={FaChevronRight} />}\r\n            </Flex>\r\n          );\r\n        })}\r\n        {items.length > 0 && <Flex\r\n              onClick={() => handleClick({ id: prevItem.id})}\r\n              _hover={{ cursor: 'pointer' }}\r\n              align=\"center\"\r\n              justify=\"space-between\"\r\n            >\r\n              <Text>Rest</Text>\r\n            </Flex>}\r\n    </VStack>\r\n  );\r\n}\r\n","import {\r\n  Drawer,\r\n  DrawerBody,\r\n  DrawerCloseButton,\r\n  DrawerContent,\r\n  DrawerHeader,\r\n  DrawerOverlay,\r\n} from '@chakra-ui/react';\r\nimport { forwardRef } from 'react';\r\nimport LeftMenu from '../LeftMenu';\r\n\r\nconst LeftDrawer = forwardRef(({ isOpen, onClose, categories }, ref) => {\r\n  return (\r\n    <Drawer\r\n      isOpen={isOpen}\r\n      placement=\"left\"\r\n      onClose={onClose}\r\n      finalFocusRef={ref}\r\n    >\r\n      <DrawerOverlay>\r\n        <DrawerContent>\r\n          <DrawerCloseButton />\r\n          <DrawerHeader>MENU</DrawerHeader>\r\n          <DrawerBody>\r\n            <LeftMenu categories={categories}/>\r\n          </DrawerBody>\r\n        </DrawerContent>\r\n      </DrawerOverlay>\r\n    </Drawer>\r\n  );\r\n});\r\n\r\nexport default LeftDrawer;\r\n","import {\r\n  Box,\r\n  Flex,\r\n  Heading,\r\n  HStack,\r\n  Stack,\r\n  Icon,\r\n  IconButton,\r\n  Input,\r\n  InputGroup,\r\n  InputLeftElement,\r\n  useDisclosure,\r\n  Text,\r\n  VStack,\r\n  Spinner,\r\n  Button,\r\n  InputRightElement,\r\n} from '@chakra-ui/react';\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { FaAlignJustify, FaBackspace, FaSearch } from 'react-icons/fa';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { fetchProducts } from '../../../api';\r\nimport LeftDrawer from '../Drawer/LeftDrawer';\r\nimport _ from 'lodash';\r\nimport ShortedProduct from '../ShortedProduct';\r\n\r\nexport default function BottomNav({ categories }) {\r\n  const { isOpen, onClose, onOpen } = useDisclosure();\r\n  const btnRef = useRef();\r\n  const history = useHistory();\r\n  const [keyword, setKeyword] = useState('');\r\n  const [books, setBooks] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const trimmedKeyword = useMemo(() => keyword.trim(), [keyword]);\r\n\r\n  async function fetchData(keyword) {\r\n    setLoading(true);\r\n    try {\r\n      const { products } = await fetchProducts({\r\n        search: 'keyword=' + keyword,\r\n        limit: 3,\r\n      });\r\n      setBooks(products);\r\n    } catch (error) {\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  function handleEnter(e) {\r\n    if (e.key === 'Enter') {\r\n      history.push('/store/search?keyword=' + trimmedKeyword);\r\n    }\r\n  }\r\n\r\n  const debounce = useCallback(_.debounce(fetchData, 300), []);\r\n\r\n  function handleChangeKeyword(e) {\r\n    const keyword = e.target.value;\r\n    setKeyword(keyword);\r\n    if (trimmedKeyword !== '') {\r\n      debounce(trimmedKeyword);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    for (const sub of history.location.search.substr(1).split('&')) {\r\n      const params = sub.split('=');\r\n      if (params[0] === 'keyword') {\r\n        setKeyword(params[1]);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Stack\r\n      direction={['column', 'column', 'column', 'row']}\r\n      px={[4, 6, 12]}\r\n      py={6}\r\n      borderBottomWidth={1}\r\n      justify=\"space-between\"\r\n      align={['stretch', 'stretch', 'center']}\r\n    >\r\n      <HStack spacing={[4, 8]}>\r\n        <IconButton\r\n          onClick={onOpen}\r\n          size=\"md\"\r\n          icon={<Icon as={FaAlignJustify} />}\r\n        />\r\n        <Heading as={Link} to=\"/store\">\r\n          Bookstore\r\n        </Heading>\r\n      </HStack>\r\n\r\n      <Box w={['auto', 'auto', 300]} pos=\"relative\">\r\n        <InputGroup>\r\n          <InputLeftElement\r\n            pointerEvents=\"none\"\r\n            children={<Icon as={FaSearch} />}\r\n          />\r\n          <Input\r\n            value={keyword}\r\n            onChange={handleChangeKeyword}\r\n            onKeyPress={handleEnter}\r\n            placeholder=\"Search by keyword\"\r\n          />\r\n          <InputRightElement\r\n            children={\r\n              <IconButton\r\n                colorScheme=\"blue\"\r\n                onClick={() => setKeyword('')}\r\n                icon={<Icon as={FaBackspace} />}\r\n              />\r\n            }\r\n          />\r\n        </InputGroup>\r\n        {trimmedKeyword !== '' && (\r\n          <VStack\r\n            right={0}\r\n            left={0}\r\n            align=\"stretch\"\r\n            bg=\"white\"\r\n            mt={4}\r\n            borderWidth={1}\r\n            borderRadius=\"md\"\r\n            p={3}\r\n            pos=\"absolute\"\r\n            zIndex=\"banner\"\r\n          >\r\n            {loading ? (\r\n              <Spinner color=\"blue.500\" alignSelf=\"center\" />\r\n            ) : books.length > 0 ? (\r\n              <>\r\n                {books.map(p => (\r\n                  <ShortedProduct {...p} key={p.id} />\r\n                ))}\r\n                <Text\r\n                  textAlign=\"center\"\r\n                  color=\"blue.500\"\r\n                  as={Link}\r\n                  onClick={() => setKeyword('')}\r\n                  to={'/store/search?keyword=' + trimmedKeyword}\r\n                >\r\n                  See more books\r\n                </Text>\r\n              </>\r\n            ) : (\r\n              <Text>Please change another keyword</Text>\r\n            )}\r\n          </VStack>\r\n        )}\r\n      </Box>\r\n\r\n      <LeftDrawer\r\n        categories={categories}\r\n        ref={btnRef}\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n      />\r\n    </Stack>\r\n  );\r\n}\r\n","import { Heading, VStack, Text, HStack, Input, Button } from '@chakra-ui/react';\r\n\r\nexport default function TopFooter() {\r\n  return (\r\n    <VStack borderTopWidth={1} py={16} px={[4, 6, 12]} spacing={4}>\r\n      <Heading>Join Our Newsletter</Heading>\r\n      <Text>\r\n        Signup to be the first to hear about exclusive deals, special offers and\r\n        upcoming collections\r\n      </Text>\r\n\r\n      <form>\r\n        <HStack minWidth={[\"auto\", \"auto\", 500]}>\r\n          <Input placeholder=\"Enter email for weekly newsletter.\" />\r\n          <Button colorScheme=\"blue\" type=\"submit\">\r\n            Subscribe\r\n          </Button>\r\n        </HStack>\r\n      </form>\r\n    </VStack>\r\n  );\r\n}\r\n","import {\r\n  Button,\r\n  FormControl,\r\n  FormErrorMessage,\r\n  FormLabel,\r\n  Input,\r\n  Text,\r\n  useToast,\r\n  VStack,\r\n} from '@chakra-ui/react';\r\nimport { useForm, Controller } from 'react-hook-form';\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchUserInfo, login } from '../../../api';\r\nimport { useAppContext } from '../../../context';\r\nimport graphQLClient from '../../../graphqlClient';\r\n\r\nexport default function LoginForm({inDrawer}) {\r\n\r\n  const { handleSubmit, errors, control } = useForm();\r\n  const { dispatch } = useAppContext();\r\n  const toast = useToast();\r\n\r\n  const style = {};\r\n  if(!inDrawer){\r\n    style.p = 4;\r\n    style.borderWidth = 1;\r\n  }\r\n\r\n  async function handleLogin(data){\r\n    try{\r\n      const { token } = await login({...data});\r\n      localStorage.setItem('token', token);\r\n      graphQLClient.setHeader('authorization', 'Bearer ' + token);\r\n      const { user, cart } = await fetchUserInfo();\r\n      dispatch({ type: 'SET_AUTH', payload: { ...user, isLogin: true } });\r\n      dispatch({ type: 'SET_CART', payload: cart });\r\n    }\r\n    catch({response}){\r\n      toast({title: response.errors[0].message, status: 'error'});\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(data => handleLogin(data))}>\r\n      <VStack align=\"stretch\" {...style} borderRadius=\"md\">\r\n        <FormControl isInvalid={errors.email}>\r\n          <FormLabel htmlFor=\"email\">Email:</FormLabel>\r\n          <Controller\r\n            id=\"email\"\r\n            name=\"email\"\r\n            as={Input}\r\n            placeholder=\"Please enter your email\"\r\n            defaultValue=\"\"\r\n            rules={{ required: true, min: 6 }}\r\n            control={control}\r\n          />\r\n          <FormErrorMessage>This field is required</FormErrorMessage>\r\n        </FormControl>\r\n        <FormControl isInvalid={errors.password}>\r\n          <FormLabel htmlFor=\"password\">Password:</FormLabel>\r\n          <Controller\r\n            id=\"password\"\r\n            name=\"password\"\r\n            as={Input}\r\n            type=\"password\"\r\n            defaultValue=\"\"\r\n            placeholder=\"Please enter your password\"\r\n            rules={{ required: true }}\r\n            control={control}\r\n          />\r\n          <FormErrorMessage>This field is required</FormErrorMessage>\r\n        </FormControl>\r\n        <Button type=\"submit\" colorScheme=\"blue\">\r\n          Login\r\n        </Button>\r\n        <Button as={Link} to=\"/store/register\" colorScheme=\"green\">\r\n          Create an account\r\n        </Button>\r\n        <Link to=\"/store/forgot-password\" >\r\n          <Text as=\"u\" color=\"blue.500\">Forgot your password?</Text>\r\n        </Link>\r\n      </VStack>\r\n    </form>\r\n  );\r\n}\r\n","import {\r\n  Button,\r\n  Drawer,\r\n  DrawerBody,\r\n  DrawerCloseButton,\r\n  DrawerContent,\r\n  DrawerHeader,\r\n  DrawerOverlay,\r\n  Icon,\r\n  VStack,\r\n} from '@chakra-ui/react';\r\nimport { FaUserAlt } from 'react-icons/fa';\r\nimport LoginForm from '../Form/LoginForm';\r\nimport { forwardRef } from 'react';\r\nimport { logout } from '../../../api';\r\nimport { useHistory, Link } from 'react-router-dom';\r\nimport { useAppContext } from '../../../context';\r\n\r\nconst RightDrawer = forwardRef(({ isOpen, onClose }, ref) => {\r\n  const {\r\n    state: { auth },\r\n    dispatch\r\n  } = useAppContext();\r\n  const history = useHistory();\r\n\r\n  function handleLogout(){\r\n    logout();\r\n    dispatch({ type: 'SET_AUTH', payload: { isLogin: false } });\r\n    history.push('/store');\r\n  }\r\n\r\n  return (\r\n    <Drawer\r\n      isOpen={isOpen}\r\n      placement=\"right\"\r\n      onClose={onClose}\r\n      finalFocusRef={ref}\r\n    >\r\n      <DrawerOverlay>\r\n        <DrawerContent>\r\n          <DrawerCloseButton />\r\n          <DrawerHeader>\r\n            <Icon mr={2} as={FaUserAlt} />\r\n            Account\r\n          </DrawerHeader>\r\n\r\n          <DrawerBody>\r\n            {auth.isLogin ? (\r\n              <VStack align=\"flex-start\">\r\n             <Button as={Link} to=\"/store/order\" colorScheme=\"green\">Order</Button>\r\n              <Button onClick={handleLogout} colorScheme=\"red\">Logout</Button></VStack>\r\n              \r\n            ) : (\r\n              <LoginForm inDrawer={true} />\r\n            )}\r\n          </DrawerBody>\r\n        </DrawerContent>\r\n      </DrawerOverlay>\r\n    </Drawer>\r\n  );\r\n});\r\n\r\nexport default RightDrawer;\r\n","import React from 'react';\r\nimport { useColorMode, useColorModeValue, Icon } from '@chakra-ui/react';\r\nimport { FaMoon, FaSun } from 'react-icons/fa';\r\n\r\nconst ColorModeSwitcher = props => {\r\n  const { toggleColorMode } = useColorMode();\r\n  const text = useColorModeValue('dark', 'light');\r\n  const SwitchIcon = useColorModeValue(FaMoon, FaSun);\r\n\r\n  return (\r\n    <Icon\r\n      _hover={{cursor: \"pointer\"}}\r\n      aria-label={`Switch to ${text} mode`}\r\n      color=\"current\"\r\n      onClick={toggleColorMode}\r\n      as={SwitchIcon}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ColorModeSwitcher;","import { Flex, HStack, Icon, Text, useDisclosure } from '@chakra-ui/react';\r\nimport {\r\n  FaQuestionCircle,\r\n  FaPhoneAlt,\r\n  FaHeart,\r\n  FaUserAlt,\r\n  FaShoppingBag,\r\n  FaSlidersH\r\n} from 'react-icons/fa';\r\nimport RightDrawer from '../Drawer/RightDrawer';\r\nimport ColorModeSwitcher from '../../ColorModeSwitcher';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function TopNav() {\r\n  const { isOpen, onClose, onOpen } = useDisclosure();\r\n\r\n  return (\r\n    <HStack\r\n      px={[4, 6, 12]}\r\n      py={2}\r\n      borderBottomWidth={1}\r\n      justify={['center', 'center', 'space-between']}\r\n    >\r\n      <HStack spacing={8} d={['none', 'none', 'flex']}>\r\n        <Flex align=\"center\">\r\n          <Icon mr={2} as={FaQuestionCircle} /> Can we help you?\r\n        </Flex>\r\n        <Flex align=\"center\">\r\n          <Icon mr={2} as={FaPhoneAlt} /> +1 245-345-789\r\n        </Flex>\r\n      </HStack>\r\n      <HStack spacing={8}>\r\n        <Link to=\"/store/wishlist\">\r\n          <Icon as={FaHeart} />\r\n        </Link>\r\n        <Link to=\"/admin\">\r\n          <Icon as={FaSlidersH} />\r\n        </Link>\r\n        <Text>\r\n          <Icon\r\n            _hover={{ cursor: 'pointer' }}\r\n            onClick={onOpen}\r\n            as={FaUserAlt}\r\n          />\r\n        </Text>\r\n        <Link to=\"/store/cart\">\r\n          <Icon as={FaShoppingBag} />\r\n        </Link>\r\n        <Text>\r\n          <ColorModeSwitcher />\r\n        </Text>\r\n      </HStack>\r\n      <RightDrawer isOpen={isOpen} onClose={onClose} />\r\n    </HStack>\r\n  );\r\n}\r\n","import { Box } from '@chakra-ui/react';\r\nimport BottomFooter from '../../components/Store/Footer/BottomFooter';\r\nimport BottomNav from '../../components/Store/Nav/BottomNav';\r\nimport TopFooter from '../../components/Store/Footer/TopFooter';\r\nimport TopNav from '../../components/Store/Nav/TopNav';\r\nimport { useEffect, useState } from 'react';\r\nimport { fetchCategories } from '../../api';\r\n\r\nexport default function Layout({ children }) {\r\n\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const { categories } = await fetchCategories();\r\n        setCategories(categories.filter(c => !c.parent));\r\n      }\r\n      catch(error){\r\n        throw error;\r\n      }\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <Box>\r\n      <Box id=\"header\">\r\n        <TopNav/>\r\n        <BottomNav categories={categories} />\r\n      </Box>\r\n      <Box id=\"main\">{children}</Box>\r\n      <Box id=\"footer\">\r\n        <TopFooter />\r\n        <BottomFooter />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Breadcrumb as Container,\r\n  BreadcrumbItem,\r\n  BreadcrumbLink,\r\n} from '@chakra-ui/react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function Breadcrumb({ category }) {\r\n  const categories = [];\r\n\r\n  function recursiveCategory(category) {\r\n    categories.unshift(category);\r\n    if (category.parent) {\r\n      recursiveCategory(category.parent);\r\n    }\r\n  }\r\n\r\n  recursiveCategory(category);\r\n\r\n  return (\r\n    <Box px={[4, 6, 12]} py={6} borderBottomWidth={1}>\r\n      <Container>\r\n        <BreadcrumbItem>\r\n          <BreadcrumbLink as={Link} to='/store'>Home</BreadcrumbLink>\r\n        </BreadcrumbItem>\r\n        {categories.map((category, i) => (\r\n          <BreadcrumbItem key={category.id}>\r\n            <BreadcrumbLink\r\n              as={Link}\r\n              to={ '/store/search?category=' + category.id }\r\n              isCurrentPage={i === categories.length - 1}\r\n            >\r\n              {category.name}\r\n            </BreadcrumbLink>\r\n          </BreadcrumbItem>\r\n        ))}\r\n      </Container>\r\n    </Box>\r\n  );\r\n}\r\n","import { VStack } from '@chakra-ui/react';\r\nimport { useEffect, useState } from 'react';\r\nimport { fetchProducts } from '../../../api';\r\nimport ShortedProduct from '../ShortedProduct';\r\n\r\nexport default function FeaturedShortedProductBlock() {\r\n  const [products, setProducts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const { products } = await fetchProducts({ limit: 3 });\r\n      setProducts(products);\r\n    }\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <VStack\r\n      p={8}\r\n      spacing={8}\r\n      borderWidth={1}\r\n      align=\"flex-start\"\r\n      borderRadius=\"md\"\r\n    >\r\n        {products.map(product => (<ShortedProduct key={product.id} {...product}/>))}\r\n      \r\n    </VStack>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  HStack,\r\n  Icon,\r\n  StackDivider,\r\n  Text,\r\n  VStack,\r\n} from '@chakra-ui/react';\r\nimport { FaCheckCircle, FaFacebookMessenger, FaRegMoneyBillAlt, FaShippingFast } from 'react-icons/fa';\r\n\r\nexport default function SupportInfoBlock() {\r\n  return (\r\n    <VStack\r\n      spacing={8}\r\n      borderWidth={1}\r\n      p={8}\r\n      align=\"flex-start\"\r\n      borderRadius=\"md\"\r\n    >\r\n      <HStack spacing={8}>\r\n        <Icon w={16} h={16} color=\"red.500\" as={FaShippingFast} />\r\n        <Box>\r\n          <Text fontWeight=\"bold\">Free Delivery</Text>\r\n          Orders over $100\r\n        </Box>\r\n      </HStack>\r\n\r\n      <HStack spacing={8}>\r\n        <Icon w={16} h={16} color=\"red.500\" as={FaRegMoneyBillAlt} />\r\n        <Box>\r\n          <Text fontWeight=\"bold\">Secure Payment</Text>100% Secure Payment\r\n        </Box>\r\n      </HStack>\r\n\r\n      <HStack spacing={8}>\r\n        <Icon w={16} h={16} color=\"red.500\" as={FaCheckCircle} />\r\n        <Box>\r\n          <Text fontWeight=\"bold\">Money Back Guarantee\r\n</Text>Within 30 Days\r\n         \r\n        </Box>\r\n      </HStack>\r\n\r\n      <HStack spacing={8}>\r\n        <Icon w={16} h={16} color=\"red.500\" as={FaFacebookMessenger} />\r\n        <Box>\r\n          <Text fontWeight=\"bold\">24/7 Support\r\n</Text>Within 1 Business Day\r\n        </Box>\r\n      </HStack>\r\n    </VStack>\r\n  );\r\n}\r\n","import Breadcrumb from '../../components/Store/Nav/Breadcrumb';\r\nimport BlockLayout from '../../components/Store/BlockLayout';\r\nimport {\r\n  Box,\r\n  GridItem,\r\n  Heading,\r\n  HStack,\r\n  Icon,\r\n  Image,\r\n  List,\r\n  ListIcon,\r\n  ListItem,\r\n  SimpleGrid,\r\n  Stack,\r\n  Tab,\r\n  TabList,\r\n  TabPanel,\r\n  TabPanels,\r\n  Tabs,\r\n  Text,\r\n  VStack,\r\n} from '@chakra-ui/react';\r\nimport { FcContacts, FcBookmark } from 'react-icons/fc';\r\nimport CurrencyFormat from 'react-currency-format';\r\nimport AddProductForm from '../../components/Store/Form/AddProductForm';\r\nimport CarouselWrapper from '../../components/Store/Wrapper/CarouselWrapper';\r\nimport FeaturedShortedProductBlock from '../../components/Store/Block/FeaturedShortedProductBlock';\r\nimport SupportInfoBlock from '../../components/Store/Block/SupportInfoBlock';\r\nimport { useParams } from 'react-router-dom';\r\nimport { fetchProduct, fetchProducts } from '../../api';\r\nimport { useEffect, useState } from 'react';\r\nimport Product from '../../components/Store/Product';\r\nimport ScrollTop from 'react-router-scroll-top';\r\n\r\nexport default function Single() {\r\n  const { slug } = useParams();\r\n  const [product, setProduct] = useState(null);\r\n\r\n  const [relatedProducts, setProducts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const { product } = await fetchProduct({ slug });\r\n        const { products } = await fetchProducts({\r\n          search: 'category=' + product.category.id,\r\n          limit: 10,\r\n        });\r\n        setProduct(product);\r\n        setProducts(products);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  if (!product) {\r\n    return 'loading......';\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ScrollTop/>\r\n      <Breadcrumb category={product.category} />\r\n      <BlockLayout>\r\n        <SimpleGrid columns={[1, 1, 1, 3]} gap={20}>\r\n          <GridItem colSpan={[1, 1, 1, 2]} justifyContent=\"stretch\">\r\n            <SimpleGrid columns={[1, 1, 1, 2]} gap={8} mb={12}>\r\n              <Stack width={[200, 250, 350]} justifySelf=\"center\">\r\n                <CarouselWrapper responsive={null}>\r\n                  {product.images.map(image => (\r\n                    <Image src={image.secure_url} objectFit=\"contain\" />\r\n                  ))}\r\n                </CarouselWrapper>\r\n              </Stack>\r\n              <VStack spacing={4} align=\"stretch\" textAlign=\"left\">\r\n                <Heading>{product.name}</Heading>\r\n                <Text>\r\n                  By (author) {product.authors.map(a => a.name).join(', ')}\r\n                </Text>\r\n                <Text fontSize=\"3xl\">\r\n                  <CurrencyFormat\r\n                    value={product.price * (1 - product.discount)}\r\n                    displayType={'text'}\r\n                    thousandSeparator={true}\r\n                    prefix={'$'}\r\n                  />\r\n                  {product.discount > 0 && (\r\n                    <>\r\n                      <br />\r\n                      <Text as=\"s\" fontSize=\"xl\">\r\n                        <CurrencyFormat\r\n                          value={product.price}\r\n                          displayType={'text'}\r\n                          thousandSeparator={true}\r\n                          prefix={'$'}\r\n                        />\r\n                      </Text>\r\n                    </>\r\n                  )}\r\n                </Text>\r\n                <Text noOfLines={4}>{product.description}</Text>\r\n\r\n                <AddProductForm id={product.id} />\r\n              </VStack>\r\n            </SimpleGrid>\r\n\r\n            <Box borderTopWidth={1} pt={8}>\r\n              <Tabs isFitted variant=\"enclosed\">\r\n                <TabList>\r\n                  <Tab>Description</Tab>\r\n                  <Tab>Product Details</Tab>\r\n                </TabList>\r\n\r\n                <TabPanels>\r\n                  <TabPanel>{product.description}</TabPanel>\r\n                  <TabPanel>\r\n                    <List>\r\n                      <ListItem>\r\n                        <ListIcon w={10} h={10} as={FcBookmark} />\r\n                        Category: {product.category.name}\r\n                      </ListItem>\r\n                      <ListItem>\r\n                        <ListIcon w={10} h={10} as={FcContacts} />\r\n                        Author: {product.authors.map(a => a.name).join(', ')}\r\n                      </ListItem>\r\n                    </List>\r\n                  </TabPanel>\r\n                </TabPanels>\r\n              </Tabs>\r\n            </Box>\r\n          </GridItem>\r\n          <GridItem colSpan={1}>\r\n            <FeaturedShortedProductBlock />\r\n            <Box mt={8}>\r\n              <SupportInfoBlock />\r\n            </Box>\r\n          </GridItem>\r\n        </SimpleGrid>\r\n      </BlockLayout>\r\n      <BlockLayout blockName=\"Related Products\">\r\n        <CarouselWrapper slidesToShow={5} dots={false} arrows={true}>\r\n          {relatedProducts.map(item => (\r\n            <Product inSlider={true} {...item} key={item.id} />\r\n          ))}\r\n        </CarouselWrapper>\r\n      </BlockLayout>\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  Accordion,\r\n  AccordionButton,\r\n  AccordionIcon,\r\n  AccordionItem,\r\n  AccordionPanel,\r\n  Box,\r\n  Heading,\r\n  Radio,\r\n  RadioGroup,\r\n  VStack,\r\n  NumberInput,\r\n  NumberInputField,\r\n  NumberInputStepper,\r\n  NumberIncrementStepper,\r\n  NumberDecrementStepper,\r\n  Select,\r\n  Button,\r\n} from '@chakra-ui/react';\r\nimport { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { fetchAuthors, fetchCategories } from '../../../api';\r\nimport FeaturedShortedProductBlock from './FeaturedShortedProductBlock';\r\n\r\nexport default function FilterBlock() {\r\n  const { location, push } = useHistory();\r\n  const [data, setData] = useState({ categories: [], authors: [] });\r\n  const [category, setCategory] = useState(null);\r\n  const [author, setAuthor] = useState(null);\r\n  const [range, setRange] = useState([0, 500]);\r\n  const [order, setOrder] = useState(0);\r\n  const orderOptions = [\r\n    {\r\n      value: 0,\r\n      name: 'Best Seller',\r\n    },\r\n    {\r\n      value: 1,\r\n      name: 'Newest',\r\n    },\r\n    {\r\n      value: 2,\r\n      name: 'Dec Price',\r\n    },\r\n    {\r\n      value: 3,\r\n      name: 'Inc Price',\r\n    },\r\n    {\r\n      value: 4,\r\n      name: 'On Sale',\r\n    },\r\n  ];\r\n\r\n  function handleChangeLocation() {\r\n    for (const sub of location.search.substr(1).split('&')) {\r\n      const params = sub.split('=');\r\n      if (params[0] === 'category') {\r\n        setCategory(params[1]);\r\n      } else if (params[0] === 'author') {\r\n        setAuthor(params[1]);\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const { categories } = await fetchCategories();\r\n      const { authors } = await fetchAuthors();\r\n      setData({ categories, authors });\r\n    }\r\n    fetchData();\r\n    handleChangeLocation();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    handleChangeLocation();\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    let query = [];\r\n    for (const sub of location.search.substr(1).split('&')) {\r\n      const params = sub.split('=');\r\n      if (['category', 'author', 'range', 'order'].indexOf(params[0]) === -1) {\r\n        query.push(sub);\r\n      }\r\n    }\r\n    if (category) {\r\n      query.push('category=' + category);\r\n    }\r\n    if (author) {\r\n      query.push('author=' + author);\r\n    }\r\n    query.push('range=' + range.join('-'));\r\n    query.push('order=' + order);\r\n\r\n    push('/store/search?' + query.join('&'));\r\n  }, [category, author, range, order]);\r\n\r\n  function handleChangeRange(v, type) {\r\n    if (type === 'min') {\r\n      if (v <= range[1] && v >= 0) {\r\n        setRange([v, range[1]]);\r\n      }\r\n    } else if (type === 'max') {\r\n      if (v >= range[0] && v <= 500) {\r\n        setRange([range[0], v]);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Box borderLeftWidth={1} borderRightWidth={1} borderRadius=\"md\">\r\n      <Accordion defaultIndex={[0, 1, 2, 3, 4]} allowToggle allowMultiple>\r\n        <AccordionItem>\r\n          <AccordionButton>\r\n            <Box flex=\"1\" py={4} textAlign=\"left\">\r\n              <Heading size=\"md\">Order by</Heading>\r\n            </Box>\r\n            <AccordionIcon />\r\n          </AccordionButton>\r\n          <AccordionPanel pb={4}>\r\n            <Select\r\n              value={order}\r\n              onChange={e => {\r\n                setOrder(e.target.value);\r\n              }}\r\n            >\r\n              {orderOptions.map(op => (\r\n                <option value={op.value} key={op.value}>\r\n                  {op.name}\r\n                </option>\r\n              ))}\r\n            </Select>\r\n          </AccordionPanel>\r\n        </AccordionItem>\r\n        <AccordionItem>\r\n          <AccordionButton>\r\n            <Box flex=\"1\" py={4} textAlign=\"left\">\r\n              <Heading size=\"md\">Categories </Heading>\r\n            </Box>\r\n            <AccordionIcon />\r\n          </AccordionButton>\r\n          <AccordionPanel pb={4}>\r\n            <Button size=\"sm\" onClick={() => setCategory(null)}>\r\n              Clear\r\n            </Button>\r\n            <RadioGroup\r\n              onChange={v => {\r\n                setCategory(v);\r\n              }}\r\n            >\r\n              <VStack align=\"stretch\">\r\n                {data.categories.map(c => (\r\n                  <Radio value={c.id} key={c.id} isChecked={c.id === category}>\r\n                    {(c.parent ? c.parent.name + '/' : '') + c.name}\r\n                  </Radio>\r\n                ))}\r\n              </VStack>\r\n            </RadioGroup>\r\n          </AccordionPanel>\r\n        </AccordionItem>\r\n        <AccordionItem>\r\n          <AccordionButton>\r\n            <Box flex=\"1\" py={4} textAlign=\"left\">\r\n              <Heading size=\"md\">Author </Heading>\r\n            </Box>\r\n            <AccordionIcon />\r\n          </AccordionButton>\r\n          <AccordionPanel pb={4}>\r\n            <Button size=\"sm\" onClick={() => setAuthor(null)}>\r\n              Clear\r\n            </Button>\r\n            <RadioGroup onChange={v => setAuthor(v)}>\r\n              <VStack align=\"stretch\">\r\n                {data.authors.map(item => (\r\n                  <Radio\r\n                    isChecked={item.id === author}\r\n                    key={item.id}\r\n                    value={item.id}\r\n                  >\r\n                    {item.name}\r\n                  </Radio>\r\n                ))}\r\n              </VStack>\r\n            </RadioGroup>\r\n          </AccordionPanel>\r\n        </AccordionItem>\r\n        <AccordionItem>\r\n          <AccordionButton>\r\n            <Box flex=\"1\" py={4} textAlign=\"left\">\r\n              <Heading size=\"md\">Filter by price</Heading>\r\n            </Box>\r\n            <AccordionIcon />\r\n          </AccordionButton>\r\n          <AccordionPanel pb={4}>\r\n            Min:{' '}\r\n            <NumberInput\r\n              value={range[0]}\r\n              onChange={v => handleChangeRange(v, 'min')}\r\n              min={0}\r\n              max={500}\r\n            >\r\n              <NumberInputField />\r\n              <NumberInputStepper>\r\n                <NumberIncrementStepper />\r\n                <NumberDecrementStepper />\r\n              </NumberInputStepper>\r\n            </NumberInput>\r\n            Max:{' '}\r\n            <NumberInput\r\n              value={range[1]}\r\n              onChange={v => handleChangeRange(v, 'max')}\r\n              min={0}\r\n              max={500}\r\n            >\r\n              <NumberInputField />\r\n              <NumberInputStepper>\r\n                <NumberIncrementStepper />\r\n                <NumberDecrementStepper />\r\n              </NumberInputStepper>\r\n            </NumberInput>\r\n          </AccordionPanel>\r\n        </AccordionItem>\r\n        <AccordionItem>\r\n          <AccordionButton>\r\n            <Box flex=\"1\" py={4} textAlign=\"left\">\r\n              <Heading size=\"md\">Featured Books</Heading>\r\n            </Box>\r\n            <AccordionIcon />\r\n          </AccordionButton>\r\n          <AccordionPanel pb={4}>\r\n            <FeaturedShortedProductBlock />\r\n          </AccordionPanel>\r\n        </AccordionItem>\r\n      </Accordion>\r\n    </Box>\r\n  );\r\n}\r\n","import {\r\n  Button,\r\n  GridItem,\r\n  HStack,\r\n  Select,\r\n  SimpleGrid,\r\n  Skeleton,\r\n  Stack,\r\n} from '@chakra-ui/react';\r\nimport { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { fetchProducts } from '../../api';\r\nimport FilterBlock from '../../components/Store/Block/FilterBlock';\r\nimport BlockLayout from '../../components/Store/BlockLayout';\r\nimport Product from '../../components/Store/Product';\r\nimport InifiniteScroll from 'react-infinite-scroll-component';\r\nimport ScrollTop from 'react-router-scroll-top';\r\n\r\nexport default function Search() {\r\n  const { location } = useHistory();\r\n  const [products, setProducts] = useState([]);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const limit = 12;\r\n\r\n  async function fetchData(init = false) {\r\n    const data = await fetchProducts({\r\n      search: location.search && location.search.substr(1),\r\n      offset: products.length,\r\n      limit,\r\n    });\r\n    if (init) {\r\n      setProducts(data.products);\r\n    } else {\r\n      setProducts(products.concat(data.products));\r\n    }\r\n    setHasMore(data.products.length === limit);\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData(true);\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    fetchData(true);\r\n  }, []);\r\n\r\n  return (\r\n    <BlockLayout>\r\n      <ScrollTop/>\r\n      <SimpleGrid columns={[1, 1, 1, 4]} gap={8}>\r\n        <GridItem>\r\n          <FilterBlock />\r\n        </GridItem>\r\n        <GridItem colSpan={[1, 1, 1, 3]}>\r\n          <SimpleGrid\r\n            borderTopWidth={1}\r\n            borderLeftWidth={1}\r\n            as={InifiniteScroll}\r\n            next={() => fetchData()}\r\n            dataLength={products.length}\r\n            hasMore={hasMore}\r\n            loader={\r\n              <>\r\n                {Array.from({ length: limit }).map((_, i) => (\r\n                  <Stack key={i} p={2} borderRightWidth={1} borderBottomWidth={1}>\r\n                    <Skeleton height=\"240px\" />\r\n                    <Skeleton height=\"20px\" />\r\n                    <Skeleton height=\"20px\" />\r\n                    <Skeleton height=\"20px\" />\r\n                  </Stack>\r\n                ))}\r\n              </>\r\n            }\r\n            columns={[1, 2, 3, 4]}\r\n          >\r\n            {products.map(item => (\r\n              <Product key={item.id} {...item} />\r\n            ))}\r\n          </SimpleGrid>\r\n        </GridItem>\r\n      </SimpleGrid>\r\n    </BlockLayout>\r\n  );\r\n}\r\n","import { Box, HStack, StackDivider, Text, VStack } from '@chakra-ui/react';\r\nimport CurrencyFormat from 'react-currency-format';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function ShortedOrderBlock({ items, total }) {\r\n  return (\r\n    <VStack\r\n      align=\"stretch\"\r\n      mb={4}\r\n      borderWidth={1}\r\n      p={4}\r\n      borderRadius=\"md\"\r\n      divider={<StackDivider />}\r\n    >\r\n      {items.map(({ id, name, slug, price, discount, quantity }) => (\r\n        <HStack justify=\"space-between\" key={id}>\r\n          <Box>\r\n            <Link to={'/store/book/' + slug}>\r\n              <Text fontWeight=\"bold\">{name}</Text>\r\n            </Link>\r\n            <Text as=\"small\">x{quantity}</Text>\r\n          </Box>\r\n\r\n          <Text>\r\n            <CurrencyFormat\r\n              value={price * (1 - discount) * quantity}\r\n              displayType={'text'}\r\n              decimalScale={2}\r\n              thousandSeparator={true}\r\n              prefix={'$'}\r\n            />\r\n          </Text>\r\n        </HStack>\r\n      ))}\r\n      <HStack justify=\"space-between\">\r\n        <Text>Total</Text>\r\n        <Text fontWeight=\"bold\">\r\n          <CurrencyFormat\r\n            value={total}\r\n            displayType={'text'}\r\n            decimalScale={2}\r\n            thousandSeparator={true}\r\n            prefix={'$'}\r\n          />\r\n        </Text>\r\n      </HStack>\r\n    </VStack>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Button,\r\n  FormControl,\r\n  FormErrorMessage,\r\n  FormLabel,\r\n  Input,\r\n  useToast,\r\n  VStack,\r\n} from '@chakra-ui/react';\r\nimport { useForm, Controller } from 'react-hook-form';\r\nimport { useEffect, useState } from 'react';\r\nimport { CardElement, useElements, useStripe } from '@stripe/react-stripe-js';\r\nimport { useAppContext } from '../../../context';\r\nimport { checkout, getPaymentCode } from '../../../api';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport default function CheckoutForm() {\r\n  const { handleSubmit, errors, control } = useForm();\r\n  const [cardError, setCardError] = useState(false);\r\n  const { push } = useHistory();\r\n  const {\r\n    state: {\r\n      cart: { total, items },\r\n      auth: { email },\r\n    },\r\n    dispatch,\r\n  } = useAppContext();\r\n  const toast = useToast();\r\n\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const cardElementOptions = {\r\n    style: {\r\n      base: {\r\n        fontSize: '16px',\r\n        color: '#424770',\r\n        '::placeholder': {\r\n          color: '#aab7c4',\r\n        },\r\n      },\r\n      invalid: {\r\n        color: '#9e2146',\r\n      },\r\n    },\r\n  };\r\n\r\n  async function createOrder(data) {\r\n    if (!stripe || !elements) return;\r\n\r\n    setCardError(false);\r\n    const cardElement = elements.getElement(CardElement);\r\n\r\n    try {\r\n      const { code } = await getPaymentCode({ total: total * 100 });\r\n      const { error, paymentIntent } = await stripe.confirmCardPayment(code, {\r\n        payment_method: {\r\n          card: cardElement,\r\n          billing_details: {\r\n            ...data,\r\n            email,\r\n          },\r\n        },\r\n      });\r\n\r\n      if (error) {\r\n        if (error.type === 'validation_error') {\r\n          setCardError(true);\r\n        }\r\n      } else {\r\n        await checkout({\r\n          input: {\r\n            ...data,\r\n            paymentID: paymentIntent.id,\r\n            total,\r\n            items: items.map(({ id, quantity, price, discount }) => ({\r\n              id,\r\n              quantity,\r\n              price,\r\n              discount,\r\n            })),\r\n          },\r\n        });\r\n        dispatch({ type: 'SET_CART', payload: [] });\r\n        push('/store');\r\n        toast({title: 'Your order will be processed as soon as possible'});\r\n      }\r\n    } catch (error) {\r\n      toast({ status: 'error', title: 'Checkout Error. Try again!' });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(data => createOrder(data))}>\r\n      <VStack align=\"flex-start\" p={4} borderWidth={1} borderRadius=\"md\">\r\n        <FormControl isInvalid={errors.name}>\r\n          <FormLabel htmlFor=\"name\">Fullname:</FormLabel>\r\n          <Controller\r\n            id=\"name\"\r\n            name=\"name\"\r\n            as={Input}\r\n            placeholder=\"Please enter your fullname\"\r\n            defaultValue=\"\"\r\n            rules={{ required: true, min: 6 }}\r\n            control={control}\r\n          />\r\n          <FormErrorMessage>This field is required</FormErrorMessage>\r\n        </FormControl>\r\n        <FormControl isInvalid={errors.address}>\r\n          <FormLabel htmlFor=\"address\">Address:</FormLabel>\r\n          <Controller\r\n            id=\"address\"\r\n            name=\"address\"\r\n            as={Input}\r\n            placeholder=\"Please enter your address\"\r\n            defaultValue=\"\"\r\n            rules={{ required: true, min: 6 }}\r\n            control={control}\r\n          />\r\n          <FormErrorMessage>This field is required</FormErrorMessage>\r\n        </FormControl>\r\n        <FormControl isInvalid={errors.phone}>\r\n          <FormLabel htmlFor=\"Phone\">Phone:</FormLabel>\r\n          <Controller\r\n            id=\"phone\"\r\n            name=\"phone\"\r\n            as={Input}\r\n            placeholder=\"Please enter your phone number\"\r\n            defaultValue=\"\"\r\n            control={control}\r\n            rules={{\r\n              required: true,\r\n              pattern: /^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\\s\\./0-9]*$/,\r\n            }}\r\n          />\r\n          <FormErrorMessage>\r\n            This field is required and phone number format\r\n          </FormErrorMessage>\r\n        </FormControl>\r\n        <FormControl>\r\n          <FormLabel>Payment: </FormLabel>\r\n          <Box\r\n            p={3}\r\n            borderWidth={cardError ? 2 : 1}\r\n            borderColor={cardError && 'red.500'}\r\n            borderRadius={8}\r\n          >\r\n            <CardElement options={cardElementOptions} />\r\n          </Box>\r\n        </FormControl>\r\n        <Button colorScheme=\"green\" type=\"submit\">\r\n          Order\r\n        </Button>\r\n      </VStack>\r\n    </form>\r\n  );\r\n}\r\n","import { GridItem, Heading, SimpleGrid } from '@chakra-ui/react';\r\nimport ShortedOrderBlock from '../../components/Store/Block/ShortedOrderBlock';\r\nimport BlockLayout from '../../components/Store/BlockLayout';\r\nimport CheckoutForm from '../../components/Store/Form/CheckoutForm';\r\nimport { useAppContext } from '../../context';\r\nimport withAuth from '../../hocs/withAuth';\r\n\r\nexport default withAuth(function Checkout() {\r\n  const {\r\n    state: { cart },\r\n  } = useAppContext();\r\n\r\n  return (\r\n    <BlockLayout blockName=\"Checkout\">\r\n      <SimpleGrid columns={[1, 1, 3]} gap={8}>\r\n        <GridItem colSpan={[1, 1, 2]}>\r\n          <Heading mb={4} size=\"lg\">\r\n            Billing Address\r\n          </Heading>\r\n          <CheckoutForm />\r\n        </GridItem>\r\n        <GridItem colSpan={1} order={[-1, -1, 2]}>\r\n          <Heading mb={4} size=\"lg\">\r\n            Your Cart\r\n          </Heading>\r\n          <ShortedOrderBlock {...cart} />\r\n        </GridItem>\r\n      </SimpleGrid>\r\n    </BlockLayout>\r\n  );\r\n});\r\n","import {\r\n  Button,\r\n  Heading,\r\n  HStack,\r\n  Icon,\r\n  IconButton,\r\n  NumberDecrementStepper,\r\n  NumberIncrementStepper,\r\n  NumberInput,\r\n  NumberInputField,\r\n  NumberInputStepper,\r\n  VStack,\r\n} from '@chakra-ui/react';\r\nimport { useMemo, useState } from 'react';\r\nimport CurrencyFormat from 'react-currency-format';\r\nimport { FaCheck, FaTimes } from 'react-icons/fa';\r\nimport { Link } from 'react-router-dom';\r\nimport { addItemToCart, removeItemFromCart } from '../../api';\r\nimport BlockLayout from '../../components/Store/BlockLayout';\r\nimport ShortedProduct from '../../components/Store/ShortedProduct';\r\nimport Table from '../../components/Table';\r\nimport { useAppContext } from '../../context';\r\nimport withAuth from '../../hocs/withAuth';\r\n\r\nfunction QuantityInput({ quantity, id, changeQuantity }) {\r\n  const [value, setValue] = useState(quantity);\r\n\r\n  function handleUpdateQuantity() {\r\n    changeQuantity(Number(value), id);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <NumberInput\r\n        defaultValue={1}\r\n        onChange={e => setValue(e)}\r\n        min={1}\r\n        value={value}\r\n        w={70}\r\n        size=\"sm\"\r\n      >\r\n        <NumberInputField />\r\n        <NumberInputStepper>\r\n          <NumberIncrementStepper />\r\n          <NumberDecrementStepper />\r\n        </NumberInputStepper>\r\n      </NumberInput>\r\n      <IconButton\r\n        size=\"sm\"\r\n        onClick={handleUpdateQuantity}\r\n        colorScheme=\"green\"\r\n        icon={<Icon as={FaCheck} />}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withAuth(function Cart() {\r\n  const {\r\n    state: {\r\n      cart: { items, total },\r\n    },\r\n    dispatch,\r\n  } = useAppContext();\r\n\r\n  function setCart(items) {\r\n    dispatch({ type: 'SET_CART', payload: items });\r\n  }\r\n\r\n  async function changeQuantity(quantity, id) {\r\n    try {\r\n      const { cart } = await addItemToCart({ input: { quantity, id } });\r\n      setCart(cart);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async function deleteProduct(productID) {\r\n    try {\r\n      const { cart } = await removeItemFromCart({ productID });\r\n      setCart(cart);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      { Header: 'Quantity', accessor: 'quantity' },\r\n      {\r\n        Header: 'Product',\r\n        id: 'product',\r\n        Cell: ({ row: { original } }) => <ShortedProduct {...original} />,\r\n      },\r\n      {\r\n        Header: 'Price',\r\n        id: 'price',\r\n        accessor: 'price',\r\n        Cell: ({\r\n          value,\r\n          row: {\r\n            original: { discount, quantity },\r\n          },\r\n        }) => (\r\n          <Heading size=\"lg\">\r\n            <CurrencyFormat\r\n              value={value * (1 - discount) * quantity}\r\n              displayType={'text'}\r\n              decimalScale={2}\r\n              thousandSeparator={true}\r\n              prefix={'$'}\r\n            />\r\n          </Heading>\r\n        ),\r\n      },\r\n      {\r\n        Header: 'Action',\r\n        id: 'action',\r\n        accessor: 'id',\r\n        Cell: ({\r\n          value,\r\n          row: {\r\n            original: { quantity },\r\n          },\r\n          deleteProduct,\r\n          changeQuantity,\r\n        }) => (\r\n          <HStack>\r\n            <QuantityInput\r\n              quantity={quantity}\r\n              id={value}\r\n              changeQuantity={changeQuantity}\r\n            />\r\n            <IconButton\r\n              size=\"sm\"\r\n              colorScheme=\"red\"\r\n              onClick={() => deleteProduct(value)}\r\n              icon={<Icon as={FaTimes} />}\r\n            />\r\n          </HStack>\r\n        ),\r\n      },\r\n    ],\r\n    []\r\n  );\r\n\r\n  const data = useMemo(() => items, [items]);\r\n\r\n  return (\r\n    <BlockLayout blockName=\"Cart\">\r\n      <Table\r\n        minW={600}\r\n        columns={columns}\r\n        action={{ changeQuantity, deleteProduct }}\r\n        data={data}\r\n      />\r\n      <Heading mt={4} textAlign=\"right\">\r\n        Total:{' '}\r\n        <CurrencyFormat\r\n          value={total}\r\n          displayType={'text'}\r\n          decimalScale={2}\r\n          thousandSeparator={true}\r\n          prefix={'$'}\r\n        />\r\n      </Heading>\r\n      <Button mt={4} as={Link} to=\"/store/checkout\" colorScheme=\"red\">\r\n        Checkout\r\n      </Button>\r\n    </BlockLayout>\r\n  );\r\n});\r\n","import { Redirect } from 'react-router-dom';\r\nimport { useAppContext } from '../context';\r\n\r\nexport default function withPrevent(Comp) {\r\n  return () => {\r\n    const {\r\n      state: { auth },\r\n    } = useAppContext();\r\n\r\n    if (auth.isLogin) {\r\n      return <Redirect to=\"/store\" />;\r\n    }\r\n\r\n    return <Comp />\r\n  };\r\n}\r\n","import { Box, Heading } from '@chakra-ui/react';\r\nimport BlockLayout from '../../components/Store/BlockLayout';\r\nimport LoginForm from '../../components/Store/Form/LoginForm';\r\nimport withPrevent from '../../hocs/withPrevent';\r\n\r\nexport default withPrevent(function Login() {\r\n  return (\r\n    <BlockLayout>\r\n      <Box px={[\"0\", \"20px\", \"100px\", \"400px\"]}>\r\n        <Heading mb={4}>Login</Heading>\r\n        <LoginForm />\r\n      </Box>\r\n    </BlockLayout>\r\n  );\r\n});\r\n","import {\r\n  Button,\r\n  FormControl,\r\n  FormErrorMessage,\r\n  FormLabel,\r\n  Input,\r\n  useToast,\r\n  VStack,\r\n} from '@chakra-ui/react';\r\nimport { useForm, Controller } from 'react-hook-form';\r\nimport { fetchUserInfo, register } from '../../../api';\r\nimport { useAppContext } from '../../../context';\r\nimport graphQLClient from '../../../graphqlClient';\r\n\r\nexport default function RegisterForm() {\r\n  const { handleSubmit, errors, control } = useForm();\r\n  const { dispatch } = useAppContext();\r\n  const toast = useToast();\r\n\r\n  async function handleRegister(data) {\r\n    try {\r\n      const { token } = await register({ input: data });\r\n      localStorage.setItem('token', token);\r\n      graphQLClient.setHeader('authorization', 'Bearer ' + token);\r\n      const { user, cart } = await fetchUserInfo();\r\n      dispatch({ type: 'SET_AUTH', payload: { ...user, isLogin: true } });\r\n      dispatch({ type: 'SET_CART', payload: cart });\r\n    } catch({response}){\r\n      toast({title: response.errors[0].message, status: 'error'});\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(data => handleRegister(data))}>\r\n      <VStack align=\"stretch\" p={4} borderWidth={1} borderRadius=\"md\">\r\n        <FormControl isInvalid={errors.name}>\r\n          <FormLabel htmlFor=\"name\">Fullname:</FormLabel>\r\n          <Controller\r\n            id=\"name\"\r\n            name=\"name\"\r\n            as={Input}\r\n            placeholder=\"Please enter your name\"\r\n            defaultValue=\"\"\r\n            rules={{ required: true, min: 6 }}\r\n            control={control}\r\n          />\r\n          <FormErrorMessage>This field is required</FormErrorMessage>\r\n        </FormControl>\r\n        <FormControl isInvalid={errors.email}>\r\n          <FormLabel htmlFor=\"email\">Email:</FormLabel>\r\n          <Controller\r\n            id=\"email\"\r\n            name=\"email\"\r\n            as={Input}\r\n            placeholder=\"Please enter your email\"\r\n            defaultValue=\"\"\r\n            rules={{ required: true, min: 6 }}\r\n            control={control}\r\n          />\r\n          <FormErrorMessage>This field is required</FormErrorMessage>\r\n        </FormControl>\r\n        <FormControl isInvalid={errors.password}>\r\n          <FormLabel htmlFor=\"password\">Password:</FormLabel>\r\n          <Controller\r\n            id=\"password\"\r\n            name=\"password\"\r\n            as={Input}\r\n            type=\"password\"\r\n            defaultValue=\"\"\r\n            placeholder=\"Please enter your password\"\r\n            rules={{ required: true }}\r\n            control={control}\r\n          />\r\n          <FormErrorMessage>This field is required</FormErrorMessage>\r\n        </FormControl>\r\n        <Button type=\"submit\" colorScheme=\"green\">\r\n          Register\r\n        </Button>\r\n      </VStack>\r\n    </form>\r\n  );\r\n}\r\n","import { Box, Heading } from '@chakra-ui/react';\r\nimport BlockLayout from '../../components/Store/BlockLayout';\r\nimport RegisterForm from '../../components/Store/Form/RegisterForm';\r\nimport withPrevent from '../../hocs/withPrevent';\r\n\r\nexport default withPrevent(function Login() {\r\n  return (\r\n    <BlockLayout>\r\n      <Box px={[\"0\", \"20px\", \"100px\", \"400px\"]}>\r\n        <Heading mb={4}>Register</Heading>\r\n        <RegisterForm />\r\n      </Box>\r\n    </BlockLayout>\r\n  );\r\n});","import {\r\n    Button,\r\n    FormControl,\r\n    FormErrorMessage,\r\n    FormLabel,\r\n    Input,\r\n    Text,\r\n    useToast,\r\n    VStack,\r\n  } from '@chakra-ui/react';\r\n  import { useForm, Controller } from 'react-hook-form';\r\n  import {requestResetPassword} from '../../../api';\r\n  \r\n  export default function RequestPasswordForm() {\r\n    const { handleSubmit, errors, control } = useForm();\r\n    const toast = useToast();\r\n\r\n    async function handleRequest(data){\r\n      try{\r\n        await requestResetPassword(data);\r\n        toast({title: 'A email has been sent. Check your email'});\r\n      }\r\n      catch(error){\r\n        toast({title: 'Send mail error', status: 'error'});\r\n      }\r\n    }\r\n  \r\n    return (\r\n      <form onSubmit={handleSubmit(data => handleRequest(data))}>\r\n        <VStack align=\"stretch\" p={4} borderWidth={1} borderRadius=\"md\">\r\n          <FormControl isInvalid={errors.email}>\r\n            <FormLabel htmlFor=\"email\">Email:</FormLabel>\r\n            <Controller\r\n              id=\"email\"\r\n              name=\"email\"\r\n              as={Input}\r\n              placeholder=\"Please enter your email\"\r\n              defaultValue=\"\"\r\n              rules={{ required: true, min: 6 }}\r\n              control={control}\r\n            />\r\n            <FormErrorMessage>This field is required</FormErrorMessage>\r\n          </FormControl>\r\n          <Button type=\"submit\">\r\n            Send Email\r\n          </Button>\r\n        </VStack>\r\n      </form>\r\n    );\r\n  }\r\n  ","import {\r\n  Button,\r\n  FormControl,\r\n  FormErrorMessage,\r\n  FormLabel,\r\n  Input,\r\n  useToast,\r\n  VStack,\r\n} from '@chakra-ui/react';\r\nimport { useForm, Controller } from 'react-hook-form';\r\nimport { verifyTokenAndResetPassword } from '../../../api';\r\n\r\nexport default function RequestPasswordForm({ token }) {\r\n  const { handleSubmit, errors, control } = useForm();\r\n  const toast = useToast();\r\n\r\n  async function handleReset({ password }) {\r\n    try {\r\n      await verifyTokenAndResetPassword({ password, token });\r\n      toast({ title: 'Password has been reset', status: 'success' });\r\n    } catch (error) {\r\n      toast({ title: 'Reset password error', status: 'error' });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(data => handleReset(data))}>\r\n      <VStack align=\"stretch\" p={4} borderWidth={1} borderRadius=\"md\">\r\n        <FormControl isInvalid={errors.password}>\r\n          <FormLabel htmlFor=\"password\">New password:</FormLabel>\r\n          <Controller\r\n            id=\"password\"\r\n            name=\"password\"\r\n            as={Input}\r\n            type=\"password\"\r\n            defaultValue=\"\"\r\n            placeholder=\"Please enter your new password\"\r\n            rules={{ required: true }}\r\n            control={control}\r\n          />\r\n          <FormErrorMessage>This field is required</FormErrorMessage>\r\n        </FormControl>\r\n        <Button type=\"submit\" colorScheme=\"green\">\r\n          Create new password\r\n        </Button>\r\n      </VStack>\r\n    </form>\r\n  );\r\n}\r\n","import { Box, Heading } from '@chakra-ui/react';\r\nimport { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport BlockLayout from '../../components/Store/BlockLayout';\r\nimport RequestPasswordForm from '../../components/Store/Form/RequestPasswordForm';\r\nimport ResetPasswordForm from '../../components/Store/Form/ResetPasswordForm';\r\nimport withPrevent from '../../hocs/withPrevent';\r\n\r\nexport default withPrevent(function ForgotPassword() {\r\n\r\n  const [token, setToken] = useState(null);\r\n  const {location} = useHistory();\r\n\r\n  useEffect(() => {\r\n    for(const sub of location.search.substr(1).split('&')){\r\n      const params = sub.split('=');\r\n      if(params[0] === 'token'){\r\n        setToken(params[1]);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <BlockLayout>\r\n      <Box px={['0', '20px', '100px', '400px']}>\r\n        <Heading mb={4}>\r\n          {!token ? 'Reset password' : 'Create new password'}\r\n        </Heading>\r\n        {!token ? <RequestPasswordForm /> : <ResetPasswordForm token={token} />}\r\n      </Box>\r\n    </BlockLayout>\r\n  );\r\n});\r\n","import { Button, HStack, SimpleGrid } from '@chakra-ui/react';\r\nimport BlockLayout from '../../components/Store/BlockLayout';\r\nimport Product from '../../components/Store/Product';\r\n\r\nexport default function List() {\r\n  return (\r\n    <BlockLayout>\r\n      <SimpleGrid columns={[1, 2, 4, 5]}>\r\n        {[0, 0, 0, 0, 0, 0, 0, 0].map((items, index) => (\r\n          <Product index={index} key={index} />\r\n        ))}\r\n      </SimpleGrid>\r\n      <HStack mt={6} justify=\"center\">\r\n        <Button>1</Button>\r\n        <Button>1</Button>\r\n      </HStack>\r\n    </BlockLayout>\r\n  );\r\n}\r\n","import { Flex, Spinner } from '@chakra-ui/react';\r\n\r\nexport default function LoadingData() {\r\n  return (\r\n    <Flex\r\n      h=\"100vh\"\r\n      w=\"100%\"\r\n      align=\"center\"\r\n      justify=\"center\"\r\n      bg=\"white\"\r\n      zIndex=\"banner\"\r\n    >\r\n      <Spinner size=\"xl\" color=\"blue.500\" />\r\n    </Flex>\r\n  );\r\n}\r\n","import { VStack, Icon, IconButton, SimpleGrid } from '@chakra-ui/react';\r\nimport { useEffect, useState } from 'react';\r\nimport { FaRegTrashAlt } from 'react-icons/fa';\r\nimport { getWishlist, removeWishlist } from '../../api';\r\nimport BlockLayout from '../../components/Store/BlockLayout';\r\nimport ShortedProduct from '../../components/Store/ShortedProduct';\r\nimport withAuth from '../../hocs/withAuth';\r\nimport LoadingData from '../../components/LoadingData';\r\n\r\nexport default withAuth(function Wishlist() {\r\n  const [products, setProducts] = useState(null);\r\n\r\n  async function handleRemoveWishlist(id){\r\n    try{\r\n      await removeWishlist({id});\r\n      fetchData();\r\n    }\r\n    catch(error){\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async function fetchData() {\r\n    try {\r\n      const { products } = await getWishlist();\r\n      setProducts(products);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  if (products === null) return <LoadingData />\r\n\r\n  return (\r\n    <BlockLayout blockName=\"Wishlist\">\r\n      <SimpleGrid columns={[1, 2, 4, 5]} gap={4}>\r\n        {products.map(item => (\r\n          <VStack key={item.id} borderWidth={1} p={2} align=\"stretch\">\r\n            <ShortedProduct  {...item} />\r\n            <IconButton onClick={() => handleRemoveWishlist(item.id)} icon={<Icon as={FaRegTrashAlt}/>}/>\r\n          </VStack>\r\n        ))}\r\n      </SimpleGrid>\r\n    </BlockLayout>\r\n  );\r\n});\r\n","import { useEffect, useState } from 'react';\r\nimport CurrencyFormat from 'react-currency-format';\r\nimport { fetchUserOrder } from '../../api';\r\nimport BlockLayout from '../../components/Store/BlockLayout';\r\nimport Table from '../../components/Table';\r\nimport moment from 'moment';\r\nimport {\r\n  Icon,\r\n  IconButton,\r\n  UnorderedList,\r\n  SimpleGrid,\r\n  ListItem,\r\n  Box, Heading\r\n} from '@chakra-ui/react';\r\nimport { FaRegSmile } from 'react-icons/fa';\r\nimport ShortedOrderBlock from '../../components/Store/Block/ShortedOrderBlock';\r\nimport withAuth from '../../hocs/withAuth';\r\nimport LoadingData from '../../components/LoadingData';\r\n\r\nexport default withAuth(function Order() {\r\n  const [orders, setOrders] = useState(null);\r\n  const columns = [\r\n    {\r\n      Header: 'Detail',\r\n      id: 'expanded',\r\n      Cell: ({ row }) => (\r\n        <IconButton\r\n          as=\"span\"\r\n          {...row.getToggleRowExpandedProps()}\r\n          size=\"sm\"\r\n          icon={<Icon as={FaRegSmile} />}\r\n          colorScheme=\"green\"\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      Header: 'Total',\r\n      accessor: 'total',\r\n      Cell: ({ value }) => (\r\n        <CurrencyFormat\r\n          value={value}\r\n          displayType={'text'}\r\n          decimalScale={2}\r\n          thousandSeparator={true}\r\n          prefix={'$'}\r\n        />\r\n      ),\r\n    },\r\n    { Header: 'Status', accessor: 'status' },\r\n    {\r\n      Header: 'Date Order',\r\n      accessor: 'createdAt',\r\n      Cell: ({ value }) => moment(Number(value)).fromNow(),\r\n    },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const { orders } = await fetchUserOrder();\r\n        setOrders(orders);\r\n      } catch (error) {\r\n        throw error;\r\n      }\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  const renderRowSubComponent = ({ row: { original: order } }) => (\r\n    <><Heading size=\"xl\" mb={4}>Order Detail</Heading>\r\n    <SimpleGrid columns={[1, 1, 1, 2]} gap={4}>\r\n      <Box px={4} py={2}>\r\n        <UnorderedList>\r\n          <ListItem>Name: {order.name}</ListItem>\r\n          <ListItem>Phone: {order.phone}</ListItem>\r\n          <ListItem>Address: {order.address}</ListItem>\r\n          <ListItem>Status: {order.status}</ListItem>\r\n        </UnorderedList>\r\n      </Box>\r\n      <ShortedOrderBlock total={order.total} items={order.items} />\r\n    </SimpleGrid></>\r\n  );\r\n\r\n  if(orders === null){\r\n    return <LoadingData/>\r\n  }\r\n\r\n  return (\r\n    <BlockLayout blockName=\"Order\">\r\n      <Table\r\n        columns={columns}\r\n        data={orders}\r\n        renderRowSubComponent={renderRowSubComponent}\r\n      />\r\n    </BlockLayout>\r\n  );\r\n});\r\n","import { Switch, Route, Redirect } from 'react-router-dom';\r\nimport Index from './Index';\r\nimport Layout from './Layout';\r\nimport Single from './Single';\r\nimport Search from './Search';\r\nimport Checkout from './Checkout';\r\nimport Cart from './Cart';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport ForgotPassword from './ForgotPassword';\r\nimport List from './List';\r\nimport Wishlist from './Wishlist';\r\nimport Order from './Order';\r\n\r\nexport default function StoreRoute() {\r\n  return <Layout>\r\n      <Switch>\r\n          <Route path=\"/store\" component={Index} exact/>\r\n          <Route path=\"/store/list/:section/:id\" component={List} />\r\n          <Route path=\"/store/wishlist\" component={Wishlist} />\r\n          <Route path=\"/store/order\" component={Order} />\r\n          <Route path=\"/store/book/:slug\" component={Single} exact />\r\n          <Route path=\"/store/search\" component={Search} exact/>\r\n          <Route path=\"/store/cart\" component={Cart} exact/>\r\n          <Route path=\"/store/checkout\" component={Checkout} exact/>\r\n          <Route path=\"/store/login\" component={Login} />\r\n          <Route path=\"/store/register\" component={Register} />\r\n          <Route path=\"/store/forgot-password\" component={ForgotPassword} />\r\n          <Redirect to=\"/store\" />\r\n      </Switch>\r\n  </Layout>\r\n}\r\n","import React, { Suspense, useState } from 'react';\r\nimport { ChakraProvider } from '@chakra-ui/react';\r\n\r\nimport { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom';\r\nimport StoreRoute from './pages/Store/Route';\r\nimport { extendTheme } from '@chakra-ui/react';\r\nimport { createBreakpoints } from '@chakra-ui/theme-tools';\r\nimport { Elements as StripeElements } from '@stripe/react-stripe-js';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { fetchUserInfo } from './api';\r\nimport { useEffect } from 'react';\r\nimport { useAppContext } from './context';\r\nimport graphQLClient from './graphqlClient';\r\nimport LoadingData from './components/LoadingData';\r\n\r\nconst AdminRoute = React.lazy(() => import('./pages/Admin/Route'));\r\n\r\nconst breakpoints = createBreakpoints({\r\n  sm: '578px',\r\n  md: '768px',\r\n  lg: '992px',\r\n  xl: '1200px',\r\n});\r\n\r\nconst theme = extendTheme({ breakpoints });\r\n\r\nconst publicKey = process.env.REACT_APP_STRIPE_PK;\r\nconst stripePromise = loadStripe(publicKey);\r\n\r\nfunction App() {\r\n  const [loading, setLoading] = useState(true);\r\n  const { dispatch } = useAppContext();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const { user, cart } = await fetchUserInfo();\r\n        dispatch({ type: 'SET_AUTH', payload: { ...user, isLogin: true } });\r\n        dispatch({ type: 'SET_CART', payload: cart });\r\n      } catch (error) {\r\n        graphQLClient.setHeader('authorization', '');\r\n        localStorage.removeItem('token');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      fetchData();\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <ChakraProvider theme={theme}>\r\n      {!loading ? (\r\n        <StripeElements stripe={stripePromise}>\r\n          <BrowserRouter>\r\n            <Suspense fallback={<div>Loading...</div>}>\r\n              <Switch>\r\n                <Route path=\"/store\" component={StoreRoute} />\r\n                <Route path=\"/admin\" component={AdminRoute} />\r\n                <Redirect to=\"/store\" />\r\n              </Switch>\r\n            </Suspense>\r\n          </BrowserRouter>\r\n        </StripeElements>\r\n      ) : (\r\n        <LoadingData />\r\n      )}\r\n    </ChakraProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It is the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ColorModeScript } from '@chakra-ui/react';\r\nimport React, { StrictMode } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'slick-carousel/slick/slick.css';\r\nimport 'slick-carousel/slick/slick-theme.css';\r\nimport './css/index.css';\r\nimport { Provider } from './context';\r\n\r\nReactDOM.render(\r\n  <StrictMode>\r\n    <ColorModeScript />\r\n    <Provider>\r\n      <App />\r\n    </Provider>\r\n  </StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorker.unregister();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import React, { createContext, useMemo, useReducer } from 'react';\r\nimport { useContext } from 'react';\r\n\r\nconst initialsState = {\r\n  cart: { total: 0, items: [] },\r\n  auth: { isLogin: false },\r\n};\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case 'SET_AUTH':\r\n      return {\r\n        ...state,\r\n        auth: action.payload,\r\n      };\r\n    case 'SET_CART':\r\n      const total = action.payload.reduce(\r\n        (prev, item) => prev + item.quantity * item.price * (1 - item.discount),\r\n        0\r\n      );\r\n      return {\r\n        ...state,\r\n        cart: {\r\n          items: action.payload,\r\n          total,\r\n        },\r\n      };\r\n    default:\r\n      throw new Error();\r\n  }\r\n}\r\n\r\nexport const AppContext = createContext({});\r\n\r\nexport function Provider({ children }) {\r\n  const [state, dispatch] = useReducer(reducer, initialsState);\r\n  const contextValue = useMemo(\r\n    () => ({\r\n      state,\r\n      dispatch,\r\n    }),\r\n    [state, dispatch]\r\n  );\r\n  return (\r\n    <AppContext.Provider value={contextValue}>{children}</AppContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAppContext() {\r\n  return useContext(AppContext);\r\n}\r\n","import { HStack, Image, Text, VStack } from '@chakra-ui/react';\r\nimport CurrencyFormat from 'react-currency-format';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport default function ShortedProduct({\r\n  name,\r\n  price,\r\n  discount,\r\n  images = [],\r\n  slug,\r\n}) {\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <HStack\r\n      align=\"flex-start\"\r\n      spacing={4}\r\n      _hover={{ cursor: 'pointer' }}\r\n      onClick={() => {\r\n        history.push('/store/book/' + slug);\r\n      }}\r\n    >\r\n      <Image w={70} objectFit=\"contain\" src={images[0].secure_url} />\r\n      <VStack align=\"flex-start\">\r\n        <Text fontWeight=\"bold\">{name}</Text>\r\n        <Text>\r\n          <CurrencyFormat\r\n            value={price * (1 - discount)}\r\n            displayType={'text'}\r\n            decimalScale={2}\r\n            thousandSeparator={true}\r\n            prefix={'$'}\r\n          />\r\n          {discount > 0 && (\r\n            <Text as=\"s\" fontSize=\"sm\">\r\n              <CurrencyFormat\r\n                value={price}\r\n                displayType={'text'}\r\n                thousandSeparator={true}\r\n                prefix={'$'}\r\n              />\r\n            </Text>\r\n          )}\r\n        </Text>\r\n      </VStack>\r\n    </HStack>\r\n  );\r\n}\r\n","import { Redirect } from 'react-router-dom';\r\nimport { useAppContext } from '../context';\r\n\r\nexport default function withAuth(Comp, options = { checkAdmin: false }) {\r\n  return () => {\r\n    const { state: { auth } } = useAppContext();\r\n\r\n    if (!auth.isLogin) {\r\n      return <Redirect to=\"/store/login\" />;\r\n    }\r\n\r\n    if (options.checkAdmin && !auth.isAdmin) {\r\n      return <Redirect to=\"/store\" />;\r\n    }\r\n\r\n    return <Comp />;\r\n  };\r\n}\r\n","import { Box, Heading, HStack, Icon, IconButton, Text } from '@chakra-ui/react';\r\nimport {\r\n  FaAngleDoubleLeft,\r\n  FaAngleDoubleRight,\r\n  FaAngleLeft,\r\n  FaAngleRight,\r\n} from 'react-icons/fa';\r\nimport React from 'react';\r\nimport { useExpanded, usePagination, useTable } from 'react-table';\r\n\r\nexport default function Table({\r\n  columns,\r\n  data,\r\n  action,\r\n  skipPageReset,\r\n  renderRowSubComponent,\r\n  ...rest\r\n}) {\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    visibleColumns,\r\n    headerGroups,\r\n    prepareRow,\r\n    page,\r\n    canPreviousPage,\r\n    canNextPage,\r\n    pageOptions,\r\n    pageCount,\r\n    gotoPage,\r\n    nextPage,\r\n    previousPage,\r\n    setPageSize,\r\n    state: { pageIndex, pageSize, expanded },\r\n  } = useTable(\r\n    {\r\n      columns,\r\n      data,\r\n      autoResetPage: !skipPageReset,\r\n      ...action,\r\n    },\r\n    useExpanded,\r\n    usePagination\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Box overflowX=\"auto\" borderRadius=\"md\" borderWidth={1}>\r\n        <Box w=\"full\" as=\"table\" {...rest} {...getTableProps()}>\r\n          <thead>\r\n            {headerGroups.map((headerGroup, hgI) => (\r\n              <TRow key={hgI} {...headerGroup.getHeaderGroupProps()}>\r\n                {headerGroup.headers.map((column, hcI) => (\r\n                  <THeading key={hcI} {...column.getHeaderProps()}>\r\n                    {column.render('Header')}\r\n                  </THeading>\r\n                ))}\r\n              </TRow>\r\n            ))}\r\n          </thead>\r\n          <tbody {...getTableBodyProps()}>\r\n            {page.map((row, rI) => {\r\n              prepareRow(row);\r\n              return (\r\n                <React.Fragment key={rI}>\r\n                  <TRow {...row.getRowProps()}>\r\n                    {row.cells.map((cell, cI) => {\r\n                      return (\r\n                        <TData key={cI} {...cell.getCellProps()}>\r\n                          {cell.render('Cell')}\r\n                        </TData>\r\n                      );\r\n                    })}\r\n                  </TRow>\r\n                  {row.isExpanded && (\r\n                    <TRow>\r\n                      <TData colSpan={visibleColumns.length}>\r\n                        {renderRowSubComponent({ row })}\r\n                      </TData>\r\n                    </TRow>\r\n                  )}\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n          </tbody>\r\n          <tfoot></tfoot>\r\n        </Box>\r\n      </Box>\r\n      <HStack my={4}>\r\n        <IconButton\r\n          colorScheme=\"blue\"\r\n          size=\"sm\"\r\n          disabled={!canPreviousPage}\r\n          icon={<Icon as={FaAngleDoubleLeft} />}\r\n          onClick={() => gotoPage(0)}\r\n        />\r\n        <IconButton\r\n          colorScheme=\"blue\"\r\n          size=\"sm\"\r\n          disabled={!canPreviousPage}\r\n          icon={<Icon as={FaAngleLeft} />}\r\n          onClick={() => previousPage()}\r\n        />\r\n        <IconButton\r\n          colorScheme=\"blue\"\r\n          size=\"sm\"\r\n          disabled={!canNextPage}\r\n          icon={<Icon as={FaAngleRight} />}\r\n          onClick={() => nextPage()}\r\n        />\r\n        <IconButton\r\n          colorScheme=\"blue\"\r\n          size=\"sm\"\r\n          disabled={!canNextPage}\r\n          icon={<Icon as={FaAngleDoubleRight} />}\r\n          onClick={() => gotoPage(pageCount - 1)}\r\n        />\r\n      </HStack>\r\n    </>\r\n  );\r\n}\r\n\r\nexport function THeading({ children, ...rest }) {\r\n  return (\r\n    <Heading\r\n      as=\"th\"\r\n      borderBottomWidth={3}\r\n      py={4}\r\n      px={2}\r\n      textAlign=\"left\"\r\n      size=\"md\"\r\n      {...rest}\r\n    >\r\n      {children}\r\n    </Heading>\r\n  );\r\n}\r\n\r\nexport function TData({ children, ...rest }) {\r\n  return (\r\n    <Text as=\"td\" borderBottomWidth={1} px={2} py={4} {...rest}>\r\n      {children}\r\n    </Text>\r\n  );\r\n}\r\n\r\nexport function TRow({ children, ...rest }) {\r\n  return (\r\n    <Box as=\"tr\" {...rest}>\r\n      {children}\r\n    </Box>\r\n  );\r\n}\r\n","import { request } from './graphqlClient';\r\n\r\nexport function login(variables) {\r\n  return request(\r\n    'query($email: String!, $password: String!){token: login(email: $email, password: $password)}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function register(variables) {\r\n  return request(\r\n    'mutation($input: UserData){token: register(input: $input)}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function requestResetPassword(variables) {\r\n  return request(\r\n    'mutation($email: String!){result: requestResetPassword(email: $email)}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function verifyTokenAndResetPassword(variables) {\r\n  return request(\r\n    'mutation($token: String!, $password: String!){result: verifyTokenAndResetPassword(token: $token, password: $password)}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function fetchUserInfo() {\r\n  return request(\r\n    'query{user: getUserInfo{name, isAdmin, email, id} cart:getUserCart{id, name, price, slug, discount, quantity, images{secure_url}}}'\r\n  );\r\n}\r\n\r\nexport function fetchUserOrder() {\r\n  return request(\r\n    'query{orders: getUserOrders{id, name, address, total, status,  phone, createdAt, items{id, name, price, discount, quantity, images{secure_url}}}}'\r\n  );\r\n}\r\n\r\nexport function addItemToCart(variables) {\r\n  return request(\r\n    'mutation ($input: CartItemData!){cart: addCartItem(input: $input){id, name, price, slug, discount, quantity, images{secure_url}}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function removeItemFromCart(variables) {\r\n  return request(\r\n    'mutation ($productID: ID!){cart: removeCartItem(productID: $productID){id, name, price, slug, discount, quantity, images{secure_url}}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function fetchProduct(variables) {\r\n  return request(\r\n    'query ($slug: String!){product: getProduct(slug: $slug){id, price, images{public_id, secure_url},discount,description,name, slug, authors{id, name}, category{id, name, parent{id, name, parent{id, name}}}}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function fetchProducts(variables) {\r\n  return request(\r\n    'query ($search: String, $offset: Int, $limit: Int){products: getProducts(search: $search, offset: $offset, limit: $limit){id, price, images{public_id, secure_url},discount,description,name, slug, authors{id, name}, category{id, name, parent{id, name, parent{id, name}}}}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function fetchCategories() {\r\n  return request(\r\n    'query {categories: getCategories{id, name, icon, children{id, name, icon, children{id}}, parent{id, name}}}'\r\n  );\r\n}\r\n\r\nexport function addCategory(variables) {\r\n  return request(\r\n    'mutation($input: CategoryData){result: addCategory(input: $input){id}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function updateCategory(variables) {\r\n  return request(\r\n    'mutation($id: ID, $input: CategoryData){result: updateCategory(id: $id, input: $input){id}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function removeCategory(variables) {\r\n  return request(\r\n    'mutation($id: ID){result:removeCategory(id: $id)}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function addAuthor(variables) {\r\n  return request(\r\n    'mutation($input: AuthorData){result: addAuthor(input: $input){id}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function updateAuthor(variables) {\r\n  return request(\r\n    'mutation($id: ID, $input: AuthorData){result: updateAuthor(id: $id, input: $input){id}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function removeAuthor(variables) {\r\n  return request('mutation($id: ID){result:removeAuthor(id: $id)}', variables);\r\n}\r\n\r\nexport function fetchAuthors() {\r\n  return request(\r\n    'query {authors:getAuthors{id, name, avatar, books, description}}'\r\n  );\r\n}\r\n\r\nexport function addWishlist(variables) {\r\n  return request('mutation ($id: ID){result:addWishlist(id: $id)}', variables);\r\n}\r\n\r\nexport function removeWishlist(variables) {\r\n  return request(\r\n    'mutation ($id: ID){result:removeWishlist(id: $id)}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function getWishlist() {\r\n  return request(\r\n    'query{products: getWishlist{id, name, images{secure_url, public_id}, price, discount}}'\r\n  );\r\n}\r\n\r\nexport function getPaymentCode(variables) {\r\n  return request(\r\n    'query($total: Float!){code: getPaymentCode(total: $total)}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function fetchUsers() {\r\n  return request('query{users: getUsers{id, name, email, isAdmin}}');\r\n}\r\n\r\nexport function addUser(variables) {\r\n  return request(\r\n    'mutation($input: UserData!){result: addUser(input: $input){id}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function updateUser(variables) {\r\n  return request(\r\n    'mutation($id: ID!, $input: UserData!){result: updateUser(id: $id, input: $input){id}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function removeUser(variables) {\r\n  return request('mutation($id: ID!){result: removeUser(id: $id)}', variables);\r\n}\r\n\r\nexport function addProduct(variables) {\r\n  return request(\r\n    'mutation($input: ProductData!){result: addProduct(input: $input){id}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function updateProduct(variables) {\r\n  return request(\r\n    'mutation($id: ID!, $input: ProductData!){result: updateProduct(id: $id, input: $input){id}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function removeProduct(variables) {\r\n  return request(\r\n    'mutation($id: ID!){result: removeProduct(id: $id)}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function fetchOrders() {\r\n  return request(\r\n    'query{orders: getOrders{id, name, address, total, status, user{email, id, name},phone, createdAt, items{id, name, price, discount, quantity, images{secure_url}}}}'\r\n  );\r\n}\r\n\r\nexport function checkout(variables) {\r\n  return request(\r\n    'mutation($input: OrderData!){order: checkout(input: $input){id, status}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function addOrder(variables) {\r\n  return request(\r\n    'mutation($input: OrderData!, $userID: ID){order: addOrder(input: $input, userID: $userID){id, status}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function updateOrder(variables) {\r\n  return request(\r\n    'mutation($input: OrderData!, $id: ID!){result: updateOrder(input: $input, id: $id){id, status}}',\r\n    variables\r\n  );\r\n}\r\n\r\nexport function removeOrder(variables) {\r\n  return request('mutation($id: ID!){result: removeOrder(id: $id)}', variables);\r\n}\r\n\r\nexport function uploadImages(variables) {\r\n  return request(\r\n    `\r\n      mutation($files: [Upload!], $urls: String) {\r\n        uploadImages(files: $files, urls: $urls) {\r\n          public_id\r\n        }\r\n      }\r\n    `,\r\n    variables\r\n  );\r\n}\r\n\r\nexport function deleteImages(variables) {\r\n  return request(\r\n    `\r\n      mutation($public_ids: [String!]) {\r\n        removeImages(public_ids: $public_ids)\r\n      }\r\n    `,\r\n    variables\r\n  );\r\n}\r\n\r\nexport function fetchImages(variables) {\r\n  return request(\r\n    `query ($cursor: String){\r\n      getImages(cursor: $cursor) {\r\n        list {\r\n          secure_url\r\n          public_id\r\n        }\r\n        next_cursor\r\n      }\r\n    }`,\r\n    variables\r\n  );\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.removeItem('token');\r\n}\r\n"],"sourceRoot":""}